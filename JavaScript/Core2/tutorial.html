<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="UTF-8" /><title>Activity-Based Discrete Event Simulation with OESjs-Core2</title><meta content="width=device-width, initial-scale=1" name="viewport" /><link href="tutorial_files/ebook.css" rel="stylesheet" type="text/css" /><meta content="OES" name="og:site_name" /><meta content="Tutorial: Discrete Event Simulation with OESjs-Core2" name="og:title" /><meta content="en" name="og:locale" /><meta content="This tutorial article explains how to use the OESjs-Core2 simulation library, which implements an architecture for Object Event Simulation (OES), extending the OESjs Core 1 simulator by adding support for activities, which may be resource-constrained." name="og:description" /><meta content="https://gwagner57.github.io/oes/js/Core2/tutorial.html" name="og:url" /><meta content="https://sim4edu.com/img/sim4edu.png" name="og:image" /><meta content="summary_large_image" name="twitter:card" /><link href="tutorial_files/icons" type="inode/directory" /><style>/*<![CDATA[*/
div.role-book-title-div {
  text-align: center;
}
h1.role-book-title {
  margin: 4em 0;
  padding-bottom: 0;
  border-bottom-style: none;
}
span.button {
  outline: 1px solid;
  background: aliceblue;
}
table.expStatistics tbody td {
    text-align: right;
}

div.role-book-title-div h1.role-book-title {
    margin-bottom: 0.33em;
}
div[id$="subtitle"] {
    margin-top: 0.33em;
}


div#share {
    display: block; /*inline-block*/
}
ul.links {
    list-style: none;
    padding: 0;
    margin: 0 0 0 1em;
}
ul.links li {
    display: inline;
    text-align: center;
    cursor: pointer;
    margin-right: 1em;
}
ul.links li:hover {
    text-decoration: underline;
}
.icon-social {
    width: 20px;
    height: 20px;
    background: #eee;
}

figure.right {
    float: right;
    margin-left: 1em;
}/*]]>*/</style></head><body><section class="role-book" id="tutorial"><div class="role-book-title-div"><h1 class="role-book-title">Activity-Based Discrete Event Simulation <br />with OESjs-Core2</h1><div class="role-content" id="tutorial-content-1"><div id="tutorial-content-1__share"> <ul class="links"><li class="share facebook" title="Share on Facebook"><a href="https://www.facebook.com/sharer.php?u=https://gwagner57.github.io/oes/js/Core2/tutorial.html" target="_blank"><svg aria-hidden="true" class="icon-social" xmlns="http://www.w3.org/2000/svg"> <symbol id="social-facebook" viewBox="0 0 18 18"><path d="M15.7,1.5H2.3c-0.5,0-0.8,0.4-0.8,0.8v13.3c0,0.5,0.4,0.8,0.8,0.8h7.2v-5.8h-2V8.4h2V6.8c0-1.9,1.2-3,2.9-3 c0.8,0,1.5,0.1,1.7,0.1v2l-1.2,0c-0.9,0-1.1,0.4-1.1,1.1v1.4h2.2l-0.3,2.3h-1.9v5.8h3.8c0.5,0,0.8-0.4,0.8-0.8V2.3 C16.5,1.9,16.1,1.5,15.7,1.5z"></path></symbol> <use xlink:href="#social-facebook" xmlns:xlink="http://www.w3.org/1999/xlink"></use> </svg></a></li><li class="share twitter" title="Share on Twitter"><a href="https://twitter.com/intent/tweet?url=https://gwagner57.github.io/oes/js/Core2/tutorial.html&amp;text=Tutorial:%20Discrete%20Event%20Simulation%20with%20OESjs" target="_blank"><svg aria-hidden="true" class="icon-social" xmlns="http://www.w3.org/2000/svg"> <symbol id="social-twitter" viewBox="0 0 18 18"><path d="M16.5,4.3c-0.6,0.2-1.1,0.4-1.8,0.5c0.6-0.4,1.1-1,1.4-1.7c-0.6,0.4-1.3,0.6-2,0.8c-0.6-0.6-1.4-1-2.2-1 c-1.7,0-3.1,1.4-3.1,3.1c0,0.2,0,0.5,0.1,0.7C6.3,6.5,4.1,5.3,2.5,3.4C2.3,3.9,2.1,4.4,2.1,5c0,1.1,0.5,2,1.4,2.6 c-0.5,0-1-0.2-1.4-0.4c0,0,0,0,0,0c0,1.5,1.1,2.8,2.5,3.1c-0.3,0.1-0.5,0.1-0.8,0.1c-0.2,0-0.4,0-0.6-0.1c0.4,1.2,1.5,2.1,2.9,2.2 c-1.1,0.8-2.4,1.3-3.8,1.3c-0.2,0-0.5,0-0.7,0c1.4,0.9,3,1.4,4.7,1.4c5.7,0,8.8-4.7,8.8-8.9c0-0.1,0-0.3,0-0.4 C15.6,5.5,16.1,4.9,16.5,4.3"></path></symbol> <use xlink:href="#social-twitter" xmlns:xlink="http://www.w3.org/1999/xlink"></use> </svg></a></li><li class="share linkedin" title="Share on LinkedIn"><a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://gwagner57.github.io/oes/js/Core2/tutorial.html" target="_blank"><svg aria-hidden="true" class="icon-social" xmlns="http://www.w3.org/2000/svg"> <symbol id="social-linkedin" viewBox="0 0 18 18"><path d="M15.4,1.5H2.6C2,1.5,1.5,2,1.5,2.6v12.8c0,0.6,0.5,1.1,1.1,1.1h12.8c0.6,0,1.1-0.5,1.1-1.1V2.6C16.5,2,16,1.5,15.4,1.5z M3.8,7.1H6v7.2H3.8V7.1z M4.9,6.1c-0.7,0-1.3-0.6-1.3-1.3c0-0.7,0.6-1.3,1.3-1.3c0.7,0,1.3,0.6,1.3,1.3C6.2,5.6,5.6,6.1,4.9,6.1z M14.5,14.3h-2.3v-3.5c0-0.8,0-1.9-1.2-1.9c-1.2,0-1.4,0.9-1.4,1.8v3.5H7.4V7.1h2.2v1h0c0.3-0.6,1-1.2,2.1-1.2 c2.3,0,2.7,1.5,2.7,3.4V14.3z"></path></symbol> <use xlink:href="#social-linkedin" xmlns:xlink="http://www.w3.org/1999/xlink"></use> </svg></a></li><li class="share email" title="Share with Email"><a aria-label="Share with Email" href="mailto:?subject=Tutorial:%20Discrete%20Event%20Simulation%20with%20OESjs-Core2&amp;body=This%20article%20shows%20how%20to%20create%20and%20run%20a%20simulation%20model%20with%20the%20JavaScript-based%20simulation%20framework%20OESjs-Core2%20available%20on%20Sim4edu.com.%20OESjs-Core2%20implements%20the%20Object%20Event%20Simulation%20paradigm%2C%20representing%20a%20general%20Discrete%20Event%20Simulation%20approach%20based%20on%20object-oriented%20modeling%20and%20event%20scheduling.%0A%0Ahttps://gwagner57.github.io/oes/js/Core2/tutorial.html" target="_blank"><svg aria-hidden="true" class="icon-social" xmlns="http://www.w3.org/2000/svg"> <symbol id="social-mail" viewBox="0 0 18 18"><path d="M9,8.2L3,4.5h12L9,8.2z M15,13.5H3V6l6,3.8L15,6V13.5z M15,3H3C2.2,3,1.5,3.7,1.5,4.5l0,9C1.5,14.3,2.2,15,3,15 h12c0.8,0,1.5-0.7,1.5-1.5v-9C16.5,3.7,15.8,3,15,3z"></path></symbol> <use xlink:href="#social-mail" xmlns:xlink="http://www.w3.org/1999/xlink"></use> </svg></a></li></ul> </div><div id="tutorial-content-1__subtitle">How to create and run activity-based Discrete Event simulations with the simulation library <a href="https://gwagner57.github.io/oes/">OESjs-Core2</a> available from the <a href="https://github.com/gwagner57/oes">OES GitHub repo</a></div> <div id="tutorial-content-1__authors">Gerd Wagner <a href="mailto:G.Wagner@b-tu.de">G.Wagner@b-tu.de</a></div><p>Copyright Â© 2020 Gerd Wagner (<a href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC</a>)</p><p>Published 2020-10-28</p><h2>Abstract</h2><p>This tutorial article explains how to use the OESjs-Core2 simulation library, which implements an architecture for Object Event Simulation (OES), extending the OESjs Core 1 simulator by adding support for activities, which are composite events with some duration. Activities are composed of a start event and an end event. Resource-constrained activities are modeled by means of <em>Resource Roles</em> (with <em>Resource Cardinality Constraints</em>) and <em>Resource Pools</em>. They can only be started when their required resources are available. Due to this dependency, a simulated activity cannot be scheduled like a simulated event. Rather, it has to be added to a queue of planned activities, from which it is dequeued, and scheduled via an immediate activity start event, as soon as the required resources become available. </p></div></div><div class="role-frontmatter" id="frontmatter"><section class="role-toc" id="toc"><h1 class="role-toc-title">Table of Contents</h1><ul class="role-booklist-entries"><li class="role-booklist-entry booklist-entry-for-lof"><a class="role-lof-ref" href="#lof">List of Figures</a></li><li class="role-booklist-entry booklist-entry-for-lot"><a class="role-lot-ref" href="#lot">List of Tables</a></li><li class="role-booklist-entry booklist-entry-for-chapter"><a class="role-chapter-ref" href="#index"><span class="role-label"><span class="role-number">1</span>. </span>Introduction to Object Event Modeling of Activities</a><ul class="role-booklist-entries"><li class="role-booklist-entry booklist-entry-for-section1"><a class="role-section1-ref" href="#CM"><span class="role-label"><span class="role-number">1.1</span>. </span>Making a Conceptual Model of the System under Investigation</a></li><li class="role-booklist-entry booklist-entry-for-section1"><a class="role-section1-ref" href="#DesM"><span class="role-label"><span class="role-number">1.2</span>. </span>Making Simulation Design Models</a></li></ul></li><li class="role-booklist-entry booklist-entry-for-chapter"><a class="role-chapter-ref" href="#index-2"><span class="role-label"><span class="role-number">2</span>. </span>Activity-Based Discrete Event Simulation with OESjs-Core2</a><ul class="role-booklist-entries"><li class="role-booklist-entry booklist-entry-for-section1"><a class="role-section1-ref" href="#SimTime"><span class="role-label"><span class="role-number">2.1</span>. </span>Simulation Time</a></li><li class="role-booklist-entry booklist-entry-for-section1"><a class="role-section1-ref" href="#SimModels"><span class="role-label"><span class="role-number">2.2</span>. </span>Simulation Models</a></li><li class="role-booklist-entry booklist-entry-for-section1"><a class="role-section1-ref" href="#SimScenarios"><span class="role-label"><span class="role-number">2.3</span>. </span>Simulation Scenarios</a></li><li class="role-booklist-entry booklist-entry-for-section1"><a class="role-section1-ref" href="#SimStatistics"><span class="role-label"><span class="role-number">2.4</span>. </span>Statistics</a></li><li class="role-booklist-entry booklist-entry-for-section1"><a class="role-section1-ref" href="#SimExperiments"><span class="role-label"><span class="role-number">2.5</span>. </span>Simulation Experiments</a></li></ul></li><li class="role-booklist-entry booklist-entry-for-chapter"><a class="role-chapter-ref" href="#chapter-1"><span class="role-label"><span class="role-number">3</span>. </span>Special Issues in Activity-Based Modeling</a><ul class="role-booklist-entries"><li class="role-booklist-entry booklist-entry-for-section1"><a class="role-section1-ref" href="#Resources-out-of-order"><span class="role-label"><span class="role-number">3.1</span>. </span>Out-of-Order and Out-of-Duty Resources</a></li><li class="role-booklist-entry booklist-entry-for-section1"><a class="role-section1-ref" href="#Waiting-Timeouts"><span class="role-label"><span class="role-number">3.2</span>. </span>Waiting Timeouts</a></li><li class="role-booklist-entry booklist-entry-for-section1"><a class="role-section1-ref" href="#Admissible-Resources"><span class="role-label"><span class="role-number">3.3</span>. </span>Admissible Resources</a></li><li class="role-booklist-entry booklist-entry-for-section1"><a class="role-section1-ref" href="#OrganizationalPositions"><span class="role-label"><span class="role-number">3.4</span>. </span>Organizational Positions and Resource Pools</a></li><li class="role-booklist-entry booklist-entry-for-section1"><a class="role-section1-ref" href="#Alternative-resources"><span class="role-label"><span class="role-number">3.5</span>. </span>Alternative Resources</a></li><li class="role-booklist-entry booklist-entry-for-section1"><a class="role-section1-ref" href="#Task-priorities"><span class="role-label"><span class="role-number">3.6</span>. </span>Task Priorities</a></li><li class="role-booklist-entry booklist-entry-for-section1"><a class="role-section1-ref" href="#Task-preemption"><span class="role-label"><span class="role-number">3.7</span>. </span>Task Preemption</a></li></ul></li><li class="role-booklist-entry booklist-entry-for-appendix"><a class="role-appendix-ref" href="#appendix-1"><span class="role-label"><span class="role-number">A</span>. </span>Further Example Models</a><ul class="role-booklist-entries"><li class="role-booklist-entry booklist-entry-for-section1"><a class="role-section1-ref" href="#Make-and-Deliver-Pizza"><span class="role-label"><span class="role-number">A.1</span>. </span>Make and Deliver Pizza</a><ul class="role-booklist-entries"><li class="role-booklist-entry booklist-entry-for-section2"><a class="role-section2-ref" href="#Make-and-Deliver-Pizza-OESjs"><span class="role-label"><span class="role-number">A.1.1</span>. </span>Implementation with OESjs</a></li></ul></li><li class="role-booklist-entry booklist-entry-for-section1"><a class="role-section1-ref" href="#Load-Haul-Dump"><span class="role-label"><span class="role-number">A.2</span>. </span>Load-Haul-Dump</a><ul class="role-booklist-entries"><li class="role-booklist-entry booklist-entry-for-section2"><a class="role-section2-ref" href="#Load-Haul-Dump-OESjs"><span class="role-label"><span class="role-number">A.2.1</span>. </span>Implementation with OESjs</a></li></ul></li></ul></li><li class="role-booklist-entry booklist-entry-for-appendix"><a class="role-appendix-ref" href="#architecture"><span class="role-label"><span class="role-number">B</span>. </span>Simulator Architecture</a></li><li class="role-booklist-entry booklist-entry-for-index"><a class="role-index-ref" href="#_index">Index</a></li></ul></section><section class="role-lof" id="lof"><h1 class="role-lof-title">List of Figures</h1><ul class="role-booklist-entries"><li class="role-booklist-entry"><a class="role-figure-ref" href="#Make-and-Deliver-Pizza__figMakeAndDeliverPizzaIDM"><span class="role-label"><span class="role-number">A-1</span>. </span>An information design model defining object, event and activity types.</a></li><li class="role-booklist-entry"><a class="role-figure-ref" href="#Make-and-Deliver-Pizza__figMakeAndDeliverPizzaPDM1"><span class="role-label"><span class="role-number">A-2</span>. </span>A process design for the Make-and-Deliver-Pizza business process</a></li><li class="role-booklist-entry"><a class="role-figure-ref" href="#Make-and-Deliver-Pizza__figMakeAndDeliverPizzaPDM2"><span class="role-label"><span class="role-number">A-3</span>. </span>An enriched process design model</a></li><li class="role-booklist-entry"><a class="role-figure-ref" href="#Load-Haul-Dump__lof__4"><span class="role-label"><span class="role-number">A-4</span>. </span>A conceptual <abbr title="Object Event">OE</abbr> class model describing object, event and activity types.</a></li><li class="role-booklist-entry"><a class="role-figure-ref" href="#Load-Haul-Dump__lof__5"><span class="role-label"><span class="role-number">A-5</span>. </span>A refined conceptual process model.</a></li><li class="role-booklist-entry"><a class="role-figure-ref" href="#Load-Haul-Dump__lof__6"><span class="role-label"><span class="role-number">A-6</span>. </span>An information design model for the Load-Haul-Dump system.</a></li><li class="role-booklist-entry"><a class="role-figure-ref" href="#Load-Haul-Dump__lof__7"><span class="role-label"><span class="role-number">A-7</span>. </span>A computationally complete process design for the Load-Haul-Dump business process.</a></li><li class="role-booklist-entry"><a class="role-figure-ref" href="#Load-Haul-Dump-OESjs__lof__8"><span class="role-label"><span class="role-number">A-8</span>. </span>A design model for the <code>HaulRequest</code> event rule.</a></li><li class="role-booklist-entry"><a class="role-figure-ref" href="#Load-Haul-Dump-OESjs__lof__9"><span class="role-label"><span class="role-number">A-9</span>. </span>A design model for the <code>GoToLoadingSite</code> event rule.</a></li><li class="role-booklist-entry"><a class="role-figure-ref" href="#Load-Haul-Dump-OESjs__lof__10"><span class="role-label"><span class="role-number">A-10</span>. </span>A design model for the <code>Load</code> event rule.</a></li><li class="role-booklist-entry"><a class="role-figure-ref" href="#Load-Haul-Dump-OESjs__lof__11"><span class="role-label"><span class="role-number">A-11</span>. </span>A design model for the <code>Haul</code> event rule.</a></li><li class="role-booklist-entry"><a class="role-figure-ref" href="#Load-Haul-Dump-OESjs__lof__12"><span class="role-label"><span class="role-number">A-12</span>. </span>A design model for the <code>Dump</code> event rule.</a></li><li class="role-booklist-entry"><a class="role-figure-ref" href="#Load-Haul-Dump-OESjs__lof__13"><span class="role-label"><span class="role-number">A-13</span>. </span>A design model for the <code>GoBackToLoadingSite</code> event rule.</a></li></ul></section><section class="role-lot" id="lot"><h1 class="role-lot-title">List of Tables</h1><ul class="role-booklist-entries"><li class="role-booklist-entry"><a class="role-table-ref" href="#SimScenarios__lot__1"><span class="role-label"><span class="role-number">2-1</span>. </span>Simulation Log</a></li><li class="role-booklist-entry"><a class="role-table-ref" href="#SimScenarios__lot__2"><span class="role-label"><span class="role-number">2-2</span>. </span>Simulation Log</a></li><li class="role-booklist-entry"><a class="role-table-ref" href="#SimStatistics__lot__3"><span class="role-label"><span class="role-number">2-3</span>. </span>Statistics</a></li><li class="role-booklist-entry"><a class="role-table-ref" href="#SimExperiments__lot__4"><span class="role-label"><span class="role-number">2-4</span>. </span>Experiment Results</a></li></ul></section></div><section class="role-chapter" id="index"><h1 class="role-chapter-title"><span class="role-label">Chapter <span class="role-number">1</span>. </span>Introduction to Object Event Modeling of Activities</h1><p>This chapter shows how to make <em>activity-based Discrete Event Simulation models</em> using the paradigm of <em>Object Event Modeling and Simulation</em> (OEM&amp;S) with UML Class Diagrams and DPMN Process Diagrams. It is recommended to first read the tutorial <a href="https://gwagner57.github.io/oes/js/Core1/tutorial.html">Discrete Event Simulation with OESjs-Core1</a>.</p>Activities are composite events, having a start event and an end event, and a duration as the time in-between their start and end events.<p>For modeling a discrete dynamic system with activities, we have to</p><ol><li>describe the <b>object types</b>, <b>event types</b> and <strong>activity types</strong> of the system (in an <em>information model</em>);</li><li>describe for any <strong>resource-constrained activity type</strong>, its resource roles and associated resource pools (in the <em>information model</em>);</li><li>specify, for any event type, the <b>state changes</b> of affected objects and the <b>follow-up events</b> caused by the occurrence of an event of that type (in a <em>process model</em>);</li><li>specify, for any activity type, the <b>state changes</b> of affected objects and <b>follow-up events</b> caused by start and end events of activities of that type (in the <em>process model</em>).</li></ol><section class="role-section1" id="CM"><h2 class="role-section1-title"><span class="role-label">Section <span class="role-number">1.1</span>. </span>Making a Conceptual Model of the System under Investigation</h2><p>As our first example, we consider a basic model of a medical department of a hospital with just one type of activity, <em>medical examinations</em>, and one type of resource, <em>doctors</em>. In our second example this model is extended by adding two other resource types, <em>examination rooms</em> and <em>nurses</em>, and another type of activity: <em>walks to rooms</em> (the walks of patients to examination rooms guided by nurses).</p><section><h4>A basic conceptual model </h4><p>In our basic model of a medical department we consider just one activity, <em>medical examinations</em>, and one type of resource, <em>doctors</em>:</p><ul><li>Patients arrive at a medical department at random times.</li><li>If there are no other planned examinations waiting for the availability of a doctor, and a doctor is available, any newly arrived patient is immediately examined by that doctor. Otherwise, the planned examination of the newly arrived patient is added to a list of planned examinations (representing a queue).</li><li>The duration of examinations varies, depending on the individual case.</li><li>When an examination by a doctor is completed, the next planned examination is started by the doctor, if there is still any planned examination in the queue.</li></ul><p>The potentially relevant <b>object types</b> of the system under investigation are:</p><ul><li>patients,</li><li>medical departments,</li><li>doctors.</li></ul><p>The potentially relevant <b>event types</b> are:</p><ul><li>patient arrivals,</li><li>examination starts,</li><li>examination ends,</li></ul><p>Instead of considering the event types <em>examination starts</em> and <em>examination ends</em>, we can consider the activity type <em>examinations</em>. Thus, we get the following conceptual information model (expressed as an <abbr style="Object-Event">OE</abbr> Class Diagram, which is a special type of UML class diagram):</p><figure id="CM__figServiceDesk0"><div><img alt="???" src="tutorial_files/MedDep_CIM1.svg" width="600" /></div></figure><p>From the diagram we can infer that:</p><ul><li>For <em>patient arrivals</em> and for <em>examinations</em>, there is an association with <em>medical departments</em> providing the <em>process owner</em>, such that for any <em>patient arrival</em> event and <em>examination</em> activity a specific <em>medical department</em> is in charge of handling the event or seeing to it that the activity is going to be performed.</li><li>While <em>patient arrivals</em> have two participants: a <em>patient</em> and a <em>medical department</em>, <em>examinations</em> have three participants: a <em>patient</em>, a <em>medical department</em> and a <em>doctor</em>.</li><li><em>Examinations</em> have one resource role, <em>doctor</em>, with a resource cardinality constraint of exactly one, which means that exactly one <em>doctor</em> is required for performing an <em>examination</em>.</li><li>The process owner of an <em>examination</em>, a <em>medical department</em>, has a resource pool for <em>doctors</em>. The <em>doctors</em> needed for performing <em>examinations</em> at this department are allocated from this pool, and the department, as the process owner of <em>examinations</em>, has a business procedure for allocating <em>doctors</em> to planned <em>examinations</em> (using certain policies).</li></ul><p>In addition to a conceptual information model, which captures the system's state structure, we also need to make a conceptual process model that captures the dynamics of the system. A process model can be expressed with the help of <em>event rules</em>, which define what happens when an event (of a certain type) occurs, or, more specifically, which <em>state changes</em> and which <em>follow-up events</em> are caused by an event of that type.</p><p>The following conceptual process model (in the form of a DPMN Process Diagram) is based on the information model above. It refers to a medical department as the <em>process owner</em>, visualized in the form of a container rectangle (called &quot;Pool&quot; in BPMN, but not in DPMN), and to <i>doctor objects</i>, as well as to the event type <i>patient arrivals</i> and to the activity type <i>examinations</i>.</p><figure><div><img alt="???" src="tutorial_files/MedDep_CPM1.svg" width="600" /></div></figure><p>This conceptual process model describes two causal regularities in the form of the following two event rules, each stated with two bullet points: one for describing the state changes and one for describing the follow-up events brought about by applying the rule.</p><ol><li><p>When a new patient arrives:</p><ul><li>if a doctor is available, then she is allocated to the examination of that patient; otherwise, a new examination task (involving the newly arrived patient) is enqueued;</li><li>if a doctor has been allocated, then the examination of the newly arrived patient is starts.</li></ul></li><li><p>When an examination is completed by a doctor:</p><ul><li>if the queue of planned examinations is empty, then the doctor is released;</li><li>otherwise, the next planned examination by that doctor starts immediately.</li></ul></li></ol><p>We can simplify the model by using a <em>Resource-Dependent Activity Scheduling</em> arrow between the <em>patient arrivals</em> event type circle and the <em>examinations</em> activity type rectangle, as shown in the following DPMN process diagram: </p><figure><div><img alt="???" src="tutorial_files/MedDep_CPM1a.svg" width="300" /></div></figure></section><section id="CM__sectExtendedConceptualModel"><h4>An extended conceptual model </h4><p>For being more realistic, we consider the fact that patients first need to be walked by nurses to the room allocated to their examination before the examination can start. So, in our extended model of a medical department we consider two other resource types, <em>examination rooms</em> and <em>nurses</em>, and another type of activity: <em>walks to rooms</em> (the walks of patients to examination rooms guided by nurses):</p><ul><li>Patients arrive at a medical department at random times.</li><li>When a new patient arrives, and an examination room and a nurse are available, that nurse walks the patient to that room, otherwise the patient has to wait for the availability of an examination room and a nurse (administratively, a new planned walk is added to the queue/list of planned walks).</li><li>When a nurse has walked a patient to a room and a doctor is available, an examination of the patient by that doctor in the room starts; otherwise the patient has to wait for the availability of a doctor (administratively, a new planned examination is placed in the queue/list of planned examinations).</li><li><p>When an examination of a patient by a doctor in a room is completed,</p><ol><li>if there is still another planned examination of a patient waiting in a room for the availability of a doctor, the doctor goes to that room and starts the examination of that patient; otherwise, the planned examination of the newly arrived patient is added to a list of planned examinations (representing a queue);</li><li>if there is still another planned walk of a patient to a room waiting for the availability of a room, the room is allocated to this planned walk; if a nurse is available, she walks the patient to that room.</li></ol></li><li>The duration of walks and examinations varies, depending on the individual case.</li></ul><p>The potentially relevant <b>object types</b> of the system under investigation are: <em>patients</em>, <em>medical departments</em>, <em>rooms</em>, <em>nurses</em> and <em>doctors</em>.</p><p>The potentially relevant <b>event types</b> are <em>patient arrivals</em> and the activity types <em>walks to rooms</em> and <em>examinations</em>.</p><p>Thus, we get the following conceptual information model expressed as an <abbr style="Object-Event">OE</abbr> class diagram:</p><figure><div><img alt="???" src="tutorial_files/MedDep_CIM2.svg" width="600" /></div></figure><p>Notice that in this model, (a) the performer role is explicitly marked with Â«performerÂ»: a <em>nurse</em> is a performer of <em>walks to room</em> while a <em>doctor</em> is a performer of <em>examinations</em>, and (b) the stereotypes Â«resource roleÂ» and Â«resource poolÂ» have been abbreviated by Â«rrÂ» and Â«rpÂ». </p><p>From the diagram we can infer that:</p><ul><li>For the event type <em>patient arrivals</em> and for the activity types <em>walks to rooms</em> and <em>examinations</em>, there is an association with <em>medical departments</em> providing the <em>process owner</em>.</li><li>While <em>patient arrivals</em> have two participants: a <em>patient</em> and a <em>medical department</em>, <em>walks</em> and <em>examinations</em> have four participants: a <em>medical department</em>, a <em>patient</em>, a <em>nurse</em> or a <em>doctor</em>, and a <em>room</em>.</li><li><em>Walks</em> have two resource roles, <em>nurse</em> and <em>room</em>, both with a resource cardinality constraint of exactly one, which means that exactly one <em>nurse</em> and one <em>room</em> are required for performing a <em>walk</em>.</li><li><em>Examinations</em> have two resource roles, <em>doctor</em> and <em>room</em>, both with a resource cardinality constraint of exactly one.</li><li>The process owner of a <em>walk to a room</em> and a subsequent <em>examination</em>, a <em>medical department</em>, has three resource pools for <em>nurses</em>, <em>rooms</em> and <em>doctors</em>. All required resources needed for performing <em>walks to room</em> and <em>examinations</em> at this department are allocated from these pools, and the department has corresponding business procedures for allocating rooms, nurses and doctors using certain allocation policies.</li></ul><p>In addition to a conceptual information model, which captures the system's state structure, we also need to make a conceptual process model that captures the dynamics of the system. A process model can be expressed with the help of event rules, which define what happens when an event (of a certain type) occurs, or, more specifically, which state changes and which follow-up events are caused by an event of that type.</p><p>The following conceptual process model (in the form of a DPMN Process Diagram) is based on the information model above. It refers to the object types <i>medical departments</i> and <i>doctors</i>, as well as to the event type <i>patient arrivals</i> and to the activity type <i>examinations</i>.</p><figure><div><img alt="???" src="tutorial_files/MedDep_CPM2.svg" width="700" /></div></figure><p>This process model describes three causal regularities in the form of the following three event rules:</p><ol><li><p>When a new patient arrives:</p><ul><li>if a room and a nurse are available, they are allocated to the walk of that patient to that room, otherwise a new planned walk is placed in the corresponding queue;</li><li>if a room has been allocated, then the nurse starts walking the patient to the room.</li></ul></li><li><p>When a walk of a patient and nurse to a room is completed:</p><ul><li>if there is still a planned walk in the queue and a room is available, then the room is allocated and the nurse is re-allocated to the walk of the next patient to that room;<br />if a doctor is available, she is allocated to the examination of that patient, else a new planned examination of that patient is queued up;</li><li>if a doctor has been allocated, then the examination of the patient starts;<br />if the nurse has been re-allocated, she starts walking the next patient to the allocated room.</li></ul></li><li><p>When an examination of a patient is completed by a doctor in a particular room:</p><ul><li>if there is still a planned examination (of another patient in another room), the doctor is re-allocated to that planned examination, else the doctor is released;<br />if the waiting line is not empty, the room is re-allocated to the next patient, else it is released;</li><li>if the doctor has been re-allocated to a planned examination, that examination starts;<br />if the room has been re-allocated to another patient and a nurse is available, that nurse starts walking the patient to the room.</li></ul></li></ol><p>Again, we can simplify the model by using <em>Resource-Dependent Activity Scheduling</em> arrows resulting in an <i>Activity Network</i> model, as shown in the following DPMN process diagram:</p><figure><div><img alt="???" src="tutorial_files/MedDep_CPM2a.svg" width="400" /></div></figure><p>We can display the two performer roles <em>doctor</em> and <em>nurse</em> with the help of two corresponding swimlanes shown within the process rectangle:</p><figure><div><img alt="???" src="tutorial_files/MedDep_CPM2b.svg" width="320" /></div></figure><blockquote class="role-attention"><p>Notice that the use of swimlanes (marking disjoint subrectangles) is a convenient visual syntax for displaying the performer roles when the different performers have a non-overlapping set of activity types. However, when activities of a certain type are performed jointly by more than one performer (e.g., when a doctor and a nurse jointly perform an examination), a different visual syntax needs to be introduced.</p></blockquote></section></section><section class="role-section1" id="DesM"><h2 class="role-section1-title"><span class="role-label">Section <span class="role-number">1.2</span>. </span>Making Simulation Design Models</h2><p>When making a simulation design based on a conceptual model of the system under investigation, we may abstract away from certain items of the conceptual model for obtaining a sufficiently simple design. The right degree of abstraction depends on the purpose of the model.</p><p>In our example of a medical department, the purpose of the simulation model is to compute the <em>maximum queue length</em> and the <em>resource utilization</em> for all types of activities. So, we may abstract away from the object type <em>patients</em> since we don't need any information about individual patients. If we don't need utilization statistics per doctor, but only the average utilization of all doctors, then we may also abstract away from the object type <i>doctors</i> This is the approach chosen in our design models <i>Medical-Department-1a</i> and <i>Medical-Department-1b</i>, while we keep the object type <i>doctors</i> for modeling individual doctors in the design model <i>Medical-Department-1c</i>.</p><p>Since we abstract away from individual patients, we rename <i>patient arrival</i> events to <i>NewCase</i> events, each of them representing a new case for an examination to be planned and performed.</p><p>The event type <i>NewCase</i> is a type of exogenous events,<a class="role-index-anchor" id="DesM__I__1"></a> which are not caused by any causal regularity of the system under investigation and, therefore, have to be modeled with a recurrence<a class="role-index-anchor" id="DesM__I__2"></a> function that allows to compute the time of the next occurrence of an event of that type.</p><section><h4>1.2.1.Â Design models based on the basic conceptual model</h4><p>We model the random variations of two variables, the recurrence of new cases and the duration of examinations, in the form of random variables<a class="role-index-anchor" id="DesM__I__3"></a> as special class-level (&quot;static&quot;) functions, with a stereotype Â«rvÂ», in the class to which they belong, as shown in the diagrams below.</p><p>The recurrence of <i>NewCase</i> events is modeled as a random variable with an exponential distribution having an event rate of 0.7 per minute. The duration of examinations is modeled as a random variable with a uniform distribution having lower bound 5 and upper bound 9.</p><section><h5>The Medical-Department-1a design model</h5><p>In the <a href="https://gwagner57.github.io/oes/js/Core2/Medical-Department-1a/index.html">Medical-Department-1a</a> information design model, instead of using the built-in generic resource management logic, we explicitly model the resource management of doctors with the help of a counter variable for available doctors in the form of an attribute <i>nmrOfAvailableDoctors</i>, and the operations <i>isDoctorAvailable()</i>, <i>allocateDoctor()</i> and <i>releaseDoctor()</i>, in the <i>MedicalDepartment</i> class:</p><figure><div><img alt="???" src="tutorial_files/MedDep_CIM1-IDM1a.svg" width="500" /></div></figure><p>The <i>isDoctorAvailable</i> function simply tests if <i>nmrOfAvailableDoctors</i> &gt; 0, while the procedures <i>allocateDoctor</i> and <i>releaseDoctor</i> decrement and increment the <i>nmrOfAvailableDoctors</i> counter.</p><p>In addition to an information design model for defining the simulation's state structure, we also need to make a process design model for defining the dynamics of the simulation. The following DPMN process diagram defines two event rules:</p><figure><div><img src="tutorial_files/MedDep_CPM1-PDM1a.svg" /></div></figure><p>Notice that this process design model contains the entire resource management logic for (de-)allocating doctors to (from) examinations. Since standard resource management procedures can be defined in a generic way, this logic (and the related code) can be moved from example models to the simulator, as explained in the next section.</p><p>The following table shows the two event rules defined by the above DPMN diagram, expressed in pseudo-code.</p><table border="1" style="border-spacing:3px;width:100%;"><thead><tr><td style="text-align:center;"><p><b>ON (event type)</b></p></td><td style="text-align:center;"><p><b>DO (event routine)</b></p></td></tr></thead><tbody><tr><td><p>NewCase( <i>md</i>) @ t<br />with <i>md</i> : MedicalDepartment</p></td><td><pre>newExam = new Examination( md);
<b>IF</b> md.isDoctorAvailable()
  md.allocateDoctor();
  <b>SCHEDULE</b> new <b>ActivityStart</b>( newExam);
<b>ELSE</b> 
  md.plannedExaminations.enqueue( newExam);</pre></td></tr><tr><td><p>Examination( <i>md</i>) @ t<br />with <i>md</i> : MedicalDepartment</p></td><td><pre><b>IF</b> md.plannedExaminations.length = 0
  md.releaseDoctor();
<b>ELSE</b>
  plannedExam = md.plannedExaminations.dequeue();
  <b>SCHEDULE</b> new <b>ActivityStart</b>( plannedExam);
</pre></td></tr></tbody></table></section><section id="DesM__sectMedDepDM1b"><h5>The Medical-Department-1b design model</h5><p>In the <a href="https://gwagner57.github.io/oes/js/Core2/Medical-Department-1b/index.html">Medical-Department-1b</a> <em>information design</em> model we make two simplifications: </p><ol><li>We drop the object type <i>MedicalDepartment</i>; since we only need to model one medical department as the process owner, we can leave it implicit. This is a general pattern: whenever there is only one process owner, we can leave it implicit.</li><li>Since we now use the generic resource management logic that is built into <em>OES Core 2</em>, we do not need to model the methods <i>isDoctorAvailable</i>, <i>allocateDoctor</i> and <i>releaseDoctor</i>. Instead, we define a resource role doctor (with resource cardinality 1) for the activity type <i>Examination</i>.</li></ol><p>The resulting information design model only includes two classes: the event type <i>NewCase</i> and the activity type <i>Examination</i>, as shown on the left-hand side of the following class diagram.</p><figure><div><img alt="???" src="tutorial_files/MedDep_CIM1-IDM1b.svg" width="550" /></div></figure><p>On the right-hand side bottom of this diagram, the resource role <i>doctor</i> and its count pool <i>doctors</i>, instantiating the <em>OES Core 2</em> library classes <i>ResourceRole</i> and <i>CountPool</i> (as a special type of <i>ResourcePool)</i>, are shown. Notice that <u>resourceRole</u> assigns the OES resource role <i>doctor</i> with resource cardinality 1 to the activity type <i>Examination</i><a class="role-footnote-ref" href="#__FN1" id="__FNR1">[1]</a>, which is in turn linked to a count pool with name <i>doctors</i>. In OESjs-Core2, this is coded in the file <kbd>Examination.js</kbd> in the following way: </p><pre>class <b>Examination</b> extends aCTIVITY {
  constructor({id, startTime, duration}={}) {
    super({id, startTime, duration});
  }
  static <b>duration</b>() {return rand.uniform( 5, 10);}
}
Examination.<b>resourceRoles</b> = {
  &quot;doctor&quot;: {card:1}
}</pre><p>The generic class-level (&quot;static&quot;) property <i>Examination.tasks</i> is automatically created by the simulator. Likewise, the count pool &quot;doctors&quot; is automatically created and assigned to the resource role definition map entry <i>Examination.resourceRoles[&quot;doctor&quot;]</i>. </p><p>In the Medical-Department-1b <em>process design</em> model we make corresponding simplifications as in the information design model above:</p><ol><li>Leaving the process owner implicit, we drop the process owner rectangle <i>MedicalDepartment</i>.</li><li>Since we use the generic resource management logic that is built into <em>OES Core 2</em> by means of <em>Resource-Dependent Activity Start</em> arrows, we do not need any resource management code involving the methods <i>isDoctorAvailable</i>, <i>allocateDoctor</i> and <i>releaseDoctor</i> in event rules. Since the event rules of the Medical-Department-1a model have only be concerned with resource management, we can discard them altogether.</li></ol><p>In the resulting DPMN diagram, the event type <i>NewCase</i> is connected to the activity type <i>Examination</i> with a <em>Resource-Dependent Activity Start</em> arrow:</p><figure><div><img src="tutorial_files/MedDep_CPM1-PDM1b.svg" width="300" /></div></figure><p>Using a <em>Resource-Dependent Activity Start</em> arrow from <i>NewCase</i> to <i>Examination</i> implies that upon a <i>NewCase</i> event a new planned <i>Examination</i> activity is enqueued by the simulator, if the required resources are not available; otherwise, a new <i>Examination</i> activity is scheduled to start immediately. Using this built-in standard resource management logic relieves the simulation developer from coding the resource availability tests and the enqueuing of a new <i>Examination</i> activity in a <i>NewCase</i> event rule.</p><p>Since in this model, <i>NewCase</i> events and <i>Examination</i> activities are handled according to the generic logic of <i>Activity Networks</i> built into the <em>OES Core 2</em> simulator, we do not need to model/specify any event rules. For having <i>NewCase</i> events succeeded by <i>Examination</i> activities, we just need to specify this event flow relationship (in OESjs-Core2) in the following way:</p><pre>NewCase.<b>successorActivity</b> = &quot;Examination&quot;;</pre><p>The simulator interprets this <i>successorActivity</i> assignment when creating follow-up events for <i>NewCase</i> events by enqueuing a planned examination activity in the following way </p><pre>Examination.<b>tasks</b>.<b>enqueue</b>( new Examination())</pre></section><section><h5>The Medical-Department-1c design model</h5><p>In the <a href="https://gwagner57.github.io/oes/js/Core2/Medical-Department-1c/index.html">Medical-Department-1c</a> design model, the resource pool <i>doctors</i> is modeled as an individual resource pool instead of a count pool. This allows making the model more realistic, for instance, by assigning an individual work schedule to each doctor defining her availability.</p><p>Compared to the Medical-Department-1b information design model, we have to change the following: </p><ol><li>We need to define an object type <i>Doctor</i> having a resource <i>status</i> attribute with the four possible values AVAILABLE, BUSY, OUT_OF_ORDER or OUT_OF_DUTY.</li><li>While we keep the <u>resourceRole</u> link with the definition of the resource role <i>doctor</i> (with resource cardinality 1), we replace the count pool linked to it with an individual resource pool.</li></ol><p>The resulting information design model is shown in the following class diagram:</p><figure><div><img alt="???" src="tutorial_files/MedDep_CIM1-IDM1c.svg" width="500" /></div></figure><p>On the right-hand side bottom of this diagram, the resource role <i>doctor</i> and its individual pool <i>doctors</i>, instantiating the <em>OES Core 2</em> library classes <i>ResourceRole</i> and <i>IndividualPool</i> (as a special type of <i>ResourcePool)</i>, are shown. In OESjs-Core2, this is coded in the file <kbd>Examination.js</kbd> in the following way: </p><pre>Examination.<b>resourceRoles</b> = {
  &quot;doctor&quot;: {<b>range</b>: Doctor, card:1}
}</pre><p>The Medical-Department-1c <em>process design</em> model is the same as in the Medical-Department-1b process design model above:</p><figure><div><img src="tutorial_files/MedDep_CPM1-PDM1b.svg" width="300" /></div></figure></section></section><section id="DesM__sectDesignModel4ExtCM"><h4>1.2.2.Â A design model based on the extended conceptual model</h4><p>In the <a href="https://gwagner57.github.io/oes/js/Core2/Medical-Department-2a/index.html">Medical-Department-2a</a> design model, we model two activity types: <i>WalkToRoom</i> activities involve a <i>room</i> and are performed by a <i>nurse</i>, while <i>Examination</i> activities involve a <i>room</i> and are performed by a <i>doctor</i>. The resource pools <i>nurses</i> and <i>doctors</i> are modeled as individual resource pools, while the resource pool <i>rooms</i>, which is used by both <i>WalkToRoom</i> and <i>Examination</i> activities, is modeled as a count pool. </p><p>The resulting information design model is shown in the following class diagram:</p><figure><div><img alt="???" src="tutorial_files/MedDep_CIM2-IDM1.svg" width="700" /></div></figure><p>Notice that the generic class-level (&quot;static&quot;) properties <i>WalkToRoom.tasks</i> and <i>Examination.tasks</i> don't have to be defined when coding the two activity types since they are automatically created by the simulator.</p>In the process design model, again, we leave the process owner implicit, not showing a container rectangle for <i>MedicalDepartment:</i><figure><div><img src="tutorial_files/MedDep_CPM2-PDM1a.svg" width="400" /></div></figure><p>However, it is an option to show the performer roles with the help of corresponding Lanes: </p><figure><div><img src="tutorial_files/MedDep_CPM2-PDM1b.svg" width="400" /></div></figure><p>In OESjs-Core2, the two <em>Resource-Dependent Activity Start</em> arrows between <i>NewCase</i> and <i>WalkToRoom</i>, as well as between <i>WalkToRoom</i> and <i>Examination</i> are coded as</p><pre>NewCase.<b>successorActivity</b> = &quot;WalkToRoom&quot;;</pre><p>in the file <kbd>NewCase.js</kbd>, and as </p><pre>WalkToRoom.<b>successorActivity</b> = &quot;Examination&quot;;</pre><p>in <kbd>WalkToRoom.js</kbd>.</p></section></section></section><section class="role-chapter" id="index-2"><h1 class="role-chapter-title"><span class="role-label">Chapter <span class="role-number">2</span>. </span>Activity-Based Discrete Event Simulation with OESjs-Core2</h1><p>The JavaScript-based simulator <i>OESjs-Core2</i> implements the <i>Object Event Simulation (<a href="https://sim4edu.com/OES" target="_top">OES</a>)</i> paradigm, allowing activity-based <em>Discrete Event Simulation</em> based on <i>object-oriented</i> modeling and <i>event scheduling</i>.</p><p>The code of an OESjs-Core2 simulation consists of (1) the OESjs-Core2 library files in the folder <kbd>OESjs-Core2</kbd>, (2) general library files in the <kbd>lib</kbd> folder and (3) the following files to be created by the simulation developer:</p><ol><li>For each object type <i>ObjT</i>, a JS code file <kbd>ObjT.js</kbd>.</li><li>For each event type <i>EvtT</i>, a JS code file <kbd>EvtT.js</kbd>.</li><li>For each activity type <i>ActT</i>, a JS code file <kbd>ActT.js</kbd>.</li><li>A <kbd>simulation.js</kbd> file defining further parts of the simulation, such as statistics variables and the initial state.</li></ol><p>OESjs-Core2 supports three forms of simulations:</p><ol><li><p>Standalone scenario simulations, which are good for getting a quick impression of a simulation model, e.g., by checking some simple statistics.</p></li><li><p>Simple simulation experiments, which are defined as a set of replicated simulation scenario runs, providing summary statistics like mean, standard deviation, minimum/maximum and confidence intervals for each statistics variable defined in the underlying model.</p></li><li><p>Parameter variation experiments, for which a set of experiment parameters with value sets are defined such that each experiment parameter corresponds to a model parameter. When an experiment is run, each experiment parameter value combination defines an experiment scenario, which is run repeatedly, according to the specified number or replications for collecting statistics.</p></li></ol><p>OESjs-Core2 allows defining two or more simulation scenarios for a given model. While an experiment type is defined for a given model, an experiment of that type is run on top of a specific scenario.</p><p>Using a simulation library like OESjs-Core2 means that only the model-specific logic has to be coded (in the form of object types, event types, event routines and other functions for model-specific computations), but not the general simulator operations (e.g., time progression and statistics) and the environment handling (e.g., user interfaces for statistics output).</p><p>The following sections present the basic concepts of the OESjs<i>-Core2</i> simulation library, and show how to implement the models described in <a class="role-chapter-ref" href="#index"><span class="role-label">Chapter <span class="role-number">1</span></span></a>.</p><blockquote class="role-attention"><p>You can download the simulation example folders from the OES repo to your computer, and then possibly modify their files for creating your own simulations. Since an OESjs simulation includes a JS worker file for running the simulator in its own thread separately from the main (user interface) thread, it cannot be run from the local file system without changing the browser's default configuration (due to the web security policy <a href="https://www.freecodecamp.org/news/cors-csp-web-security-concepts-for-developers/" title="Cross-Origin Resource Sharing">CORS</a>).</p><p>For developing OESjs simulations on your computer, you should use <em>Firefox</em> because its security settings can be easily configured such that it allows loading JS worker files directly from the local file system by disabling the flag &quot;strict_origin_policy&quot; specifically for file URLs:</p><ol type="1"><li><p>Enter &quot;<strong>about:config</strong>&quot; in the Firefox search bar.</p></li><li><p>Search for &quot;<strong>security.fileuri.strict_origin_policy</strong>&quot;.</p></li><li><p>Disable this policy by changing its value from <strong>true</strong> to <strong>false</strong>.</p></li></ol><p>This creates only a small security risk because the important web security policy called &quot;CORS&quot; is only disabled for file URLs, but not for normal URLs.</p><p>For other browsers, like Chrome, you need to install a local HTTP server and load your app's webpages from that local server, or run them via WebStorm (which has a built-in local server), because the only option for loading ES6 modules from the local file system in Chrome would be to disable the CORS policy completely (see <a href="https://windowsreport.com/browser-not-support-cross-origin/" target="_top">how to disable CORS in Chrome</a>), but that would create a severe security risk and is therefore not recommended.</p></blockquote><section class="role-section1" id="SimTime"><h2 class="role-section1-title"><span class="role-label">Section <span class="role-number">2.1</span>. </span>Simulation Time</h2><p>A simulation model has an underlying <b><i>time model</i></b>, which can be either <i>discrete time</i>, when setting</p><pre>sim.model.time = &quot;discrete&quot;;</pre><p>or <i>continuous time</i>, when setting</p><pre>sim.model.time = &quot;continuous&quot;;</pre><p>Choosing a discrete time model means that time is measured in steps (with equal durations), and all temporal random variables used in the model need to be discrete (i.e., based on discrete probability distributions). Choosing a continuous time model means that one has to define a <i>simulation time granularity</i>, as explained in the next sub-section.</p><p>In both cases, the underlying simulation <b><i>time unit</i></b> can be either left unspecified (e.g., in the case of an abstract time model), or it can be set to one of the time units &quot;ms&quot;, &quot;s&quot;, &quot;min&quot;, &quot;hour&quot;, &quot;day&quot;, &quot;week&quot;, &quot;month&quot; or &quot;year&quot;, as in</p><pre>sim.model.timeUnit = &quot;hour&quot;;</pre><p>Typical examples of time models are:</p><ol><li><p>An abstract discrete model of time where time runs in steps without any concrete meaning: </p><pre>sim.model.time = &quot;discrete&quot;;</pre></li><li><p>A concrete discrete model of time in number of days: </p><pre>sim.model.time = &quot;discrete&quot;;
sim.model.timeUnit = &quot;day&quot;;</pre></li><li><p>A concrete continuous model of time in number of seconds: </p><pre>sim.model.time = &quot;continuous&quot;;
sim.model.timeUnit = &quot;s&quot;;</pre></li></ol><section><h4>2.1.1. Time Granularity</h4><p>A model's <em>time granularity</em> is the time delay until the next moment, such that the model does not allow considering an earlier next moment. This is captured by the simulation parameter <i>nextMomentDeltaT</i> used by the simulator for scheduling immediate events with a minimal delay. When a simulation model is based on discrete time, <i>nextMomentDeltaT</i> is set to 1, referring to the next time point. When a simulation model is based on continuous time, <i>nextMomentDeltaT</i> is set to the default value 0.001, unless the model parameter <code>sim.model.nextMomentDeltaT</code> is explicitly assigned in the <kbd>simulation.js</kbd> file.</p></section><section><h4>2.1.2. Time Progression</h4><p>An important issue in simulation is the question how the simulation time is advanced by the simulator. The OES paradigm supports <strong>next-event</strong> time progression and <strong>fixed-increment</strong> time progression, as well as their combination.</p><p>An OESjs-Core1 model with fixed-increment time progression has to define a suitable periodic time event type, like <code>EachSecond</code> or <code>EachDay</code> in the form of an exogenous event type with a recurrence function returning the value 1. Such a model can be used for</p><ol><li>modeling continuous state changes (e.g., objects moving in a continuous space), or</li><li>making a discrete model that abstracts away from explicit events and uses only implicit periodic time events (&quot;ticks&quot;), which is a popular approach in social science simulation.</li></ol><p>Examples of discrete event simulation models with fixed-increment time progression and no explicit events are the <a href="https://sim4edu.com/sims/6">Schelling Segregation Model</a> and the <a href="https://sim4edu.com/sims/25/index.html">Susceptible-Infected-Recovered (SIR) Disease Model</a>.</p></section></section><section class="role-section1" id="SimModels"><h2 class="role-section1-title"><span class="role-label">Section <span class="role-number">2.2</span>. </span>Simulation Models</h2><section><h4>2.2.1. An Activity Type with a Class-Level Resource Role and a Count Pool</h4><p>Based on the conceptual model of <a class="role-section1-ref" href="#CM"><span class="role-label">Section <span class="role-number">1.1</span></span></a>, we choose the design discussed in <a class="role-section1-ref" href="#DesM"><span class="role-label">Section <span class="role-number">1.2</span></span></a> in the subsection &quot;The Medical-Department-1b design model&quot; and defined by the following information design model: </p><figure style="display:flex"><div><img alt="information design model 1b" src="tutorial_files/MedDep_CIM1-IDM1b.svg" width="700" /></div></figure><p>Notice that this model </p><ol><li><p>Does not define an object type <i>Doctor</i>, since the doctors of the department are not modeled as a collection of individual persons, but as an abstract aggregate in the form of a <em>count pool</em>.</p></li><li>Does not link the resource role <i>doctor</i> to the count pool <i>doctors</i> because linking a resource pool to an activity type for any of its resource roles has to be done by a process model, either implicitly or explicitly. By default, if there is a resource pool with the same (but pluralized) name as a resource role, it is implicitly assigned to that resource role. In general, an information design model may be the basis for many process models, and each of them may assign a different resource pool to the same resource role of an activity type.</li></ol><p>The random variable <i>recurrence</i> for modeling the random variation of the time between new cases samples from the exponential probability distribution with an event rate of 0.3, while the random variable for the <i>duration</i> of an examination samples from the uniform probability distribution with lower bound 5 and upper bound 10 (representing minutes). </p><p>The <i>NewCase</i> class can be coded with OESjs-Core2 in the following way:</p><pre>class <b>NewCase</b> extends eVENT {
  constructor({ occTime, delay}) {
    super({occTime, delay});
  }
  onEvent() {return [];}
  <b>createNextEvent</b>() {
    return new NewCase({delay: NewCase.recurrence()});
  }
  static <b>recurrence</b>() {return rand.exponential( 0.3);}
}</pre><p>The <i>onEvent</i> method is empty since no event rules are needed for this simple model. Its dynamics is entirely determined by the standard logic of resource-dependent activity scheduling built into OES Core 2.</p><p>The <i>Examination</i> class can be coded in the following way:</p><pre>class <b>Examination</b> extends aCTIVITY {
  constructor({id, startTime, duration}={}) {
    super({id, startTime, duration});
  }
  static <b>duration</b>() {return rand.uniform( 5, 10);}
}
Examination.<b>resourceRoles</b> = {
    &quot;doctor&quot;: {<b>countPoolName</b>:&quot;doctors&quot;, card:1}
}</pre><p>The process resulting from <i>NewCase</i> events followed by <i>Examination</i> activities is modeled with a <em>Resource-Dependent Activity Scheduling</em> arrow: </p><figure style="display:flex"><div><img alt="process design model 1b" src="tutorial_files/MedDep_CPM1-PDM1b.svg" width="300" /></div></figure><p>In OESjs-Core2, this simple process model is coded with one line of code in the file <kbd>NewCase.js</kbd>:</p><pre>NewCase.<b>successorActivity</b> = &quot;Examination&quot;;</pre></section><section><h4>2.2.2. Modeling a Sequence of Two Activity Types </h4><p>The following information design model of a medical department with two types of activities (discussed in <a href="#DesM__sectDesignModel4ExtCM"></a>) is based on the conceptual information model discussed in <a href="#CM__sectExtendedConceptualModel"></a>:</p><figure><img alt="???" src="tutorial_files/MedDep_CIM2-IDM1.svg" width="700" /></figure><p>The class implementing the event type <i>NewCase</i> is defined as above. The class implementing the activity type <i>WalkToRoom</i> is defined as follows:</p><pre>class <b>WalkToRoom</b> extends aCTIVITY {
  constructor({id, startTime, duration}={}) {
    super({id, startTime, duration});
  }
  static <b>duration</b>() {return rand.uniform( 0.5, 2.5);}
}
// A walk to a room requires a room and a nurse
WalkToRoom.<b>resourceRoles</b> = {
  &quot;nurse&quot;: {range: Nurse, card:1},
  &quot;room&quot;: {countPoolName:&quot;rooms&quot;, card:1}
}</pre><p>The class implementing the activity type <i>Examination</i> is defined as follows:</p><pre>class <b>Examination</b> extends aCTIVITY {
  constructor({id, startTime, duration}={}) {
    super({id, startTime, duration});
  }
  static <b>duration</b>() {return rand.uniform( 5, 10);}
}
// An examination requires a room and a doctor
Examination.<b>resourceRoles</b> = {
  &quot;doctor&quot;: {range: Doctor, card:1},
  &quot;room&quot;: {countPoolName:&quot;rooms&quot;, card:1}
}</pre><p>The following process design model (discussed in <a href="#DesM__sectDesignModel4ExtCM"></a>) is based on the conceptual process model discussed in <a href="#CM__sectExtendedConceptualModel"></a>:</p><figure><div><img src="tutorial_files/MedDep_CPM2-PDM1b.svg" width="400" /></div></figure><p>This process design model with its two <em>Resource-Dependent Activity Scheduling</em> arrows is implemented with just two statements on top of the classes <i>NewCase</i> and <i>WalkToRoom</i>:</p><pre>// Enqueue a new planned walk
NewCase.successorActivity = &quot;WalkToRoom&quot;;
// Enqueue a new planned examination
WalkToRoom.successorActivity = &quot;Examination&quot;;</pre><p>You can <a href="https://gwagner57.github.io/oes/js/Core2/Medical-Department-2a/index.html" target="_top">run this Medical-Department-2a model</a> from the project's GitHub website.</p></section><section><h4>Activities with Default Durations</h4><p>When an activity type is defined without defining a class-level <i>duration</i> function, the exponential PDF is used as a built-in default random variable for setting the durations of activities of that type according to the following settings:</p><pre>aCTIVITY.defaultMean = 1;
aCTIVITY.defaultDuration = function () {
  return rand.exponential( 1/aCTIVITY.defaultMean)
};</pre><p>It is possible to overwrite these defaults, both the <i>defaultMean</i> and the <i>defaultDuration</i> function, in a <kbd>simulation.js</kbd> file. </p></section></section><section class="role-section1" id="SimScenarios"><h2 class="role-section1-title"><span class="role-label">Section <span class="role-number">2.3</span>. </span>Simulation Scenarios</h2><p>For obtaining a complete executable simulation scenario, a simulation model has to be complemented with <em>simulation parameter settings</em> and an <em>initial system state</em>.</p><p>In general, we may have more than one simulation scenario for a simulation model. For instance, the same model could be used in two different scenarios with different initial states. </p><section><h4>2.3.1. A Simulation Scenario for Medical-Department-1b</h4><p>The default simulation scenario for the <i>Medical-Department-1b</i> model defines a duration of 1000 min per simulation run and an initial state with a count resource pool with 3 doctors:</p><pre>sim.scenario.durationInSimTime = 1000;
sim.scenario.<b>setupInitialState</b> = function () {
  // Initialize the count pool &quot;doctors&quot;
  sim.<b>resourcePools</b>[&quot;doctors&quot;].<b>available</b> = 3;
  // Schedule initial events
  sim.FEL.add( new NewCase({occTime: 1}));
}</pre><p>You can <a href="https://gwagner57.github.io/oes/js/Core2/Medical-Department-1b/index.html" target="_top">run this Medical-Department-1b scenario</a> from the project's GitHub website. An example of a run of this scenario is shown in the following simulation log:</p><table border="1" id="SimScenarios__lot__1"><caption><span class="role-label">Table <span class="role-number">2-1</span>. </span>Simulation Log</caption><thead><tr><th>Step</th><th>Time</th><th>System State</th><th>Future Events</th></tr></thead><tbody id="SimScenarios__simLog"><tr><td>1</td><td>1</td><td>av. doctors: 2</td><td>ExaminationStart@1.01, NewCase@3.33</td></tr><tr><td>2</td><td>1.01</td><td>av. doctors: 2</td><td>NewCase@3.33, ExaminationEnd@8.72</td></tr><tr><td>3</td><td>3.33</td><td>av. doctors: 1</td><td>ExaminationStart@3.34, NewCase@4.59, ExaminationEnd@8.72</td></tr><tr><td>4</td><td>3.34</td><td>av. doctors: 1</td><td>NewCase@4.59, ExaminationEnd@8.72, ExaminationEnd@12.51</td></tr><tr><td>5</td><td>4.59</td><td>av. doctors: 0</td><td>ExaminationStart@4.6, NewCase@6.93, ExaminationEnd@8.72, ExaminationEnd@12.51</td></tr><tr><td>6</td><td>4.6</td><td>av. doctors: 0</td><td>NewCase@6.93, ExaminationEnd@8.72, ExaminationEnd@12.51, ExaminationEnd@13.71</td></tr><tr><td>7</td><td>6.93</td><td>av. doctors: 0</td><td>ExaminationEnd@8.72, NewCase@8.79, ExaminationEnd@12.51, ExaminationEnd@13.71</td></tr><tr><td>8</td><td>8.72</td><td>av. doctors: 0</td><td>ExaminationStart@8.73, NewCase@8.79, ExaminationEnd@12.51, ExaminationEnd@13.71</td></tr><tr><td>9</td><td>8.73</td><td>av. doctors: 0</td><td>NewCase@8.79, ExaminationEnd@12.51, ExaminationEnd@13.71, ExaminationEnd@16.58</td></tr><tr><td>10</td><td>8.79</td><td>av. doctors: 0</td><td>NewCase@9.56, ExaminationEnd@12.51, ExaminationEnd@13.71, ExaminationEnd@16.58</td></tr><tr><td>11</td><td>9.56</td><td>av. doctors: 0</td><td>ExaminationEnd@12.51, ExaminationEnd@13.71, ExaminationEnd@16.58, NewCase@17.88</td></tr><tr><td>12</td><td>12.51</td><td>av. doctors: 0</td><td>ExaminationStart@12.52, ExaminationEnd@13.71, ExaminationEnd@16.58, NewCase@17.88</td></tr><tr><td>13</td><td>12.52</td><td>av. doctors: 0</td><td>ExaminationEnd@13.71, ExaminationEnd@16.58, NewCase@17.88, ExaminationEnd@19.95</td></tr><tr><td>14</td><td>13.71</td><td>av. doctors: 0</td><td>ExaminationStart@13.72, ExaminationEnd@16.58, NewCase@17.88, ExaminationEnd@19.95</td></tr><tr><td>15</td><td>13.72</td><td>av. doctors: 0</td><td>ExaminationEnd@16.58, NewCase@17.88, ExaminationEnd@19.95, ExaminationEnd@22.08</td></tr><tr><td>16</td><td>16.58</td><td>av. doctors: 1</td><td>NewCase@17.88, ExaminationEnd@19.95, ExaminationEnd@22.08</td></tr><tr><td>17</td><td>17.88</td><td>av. doctors: 0</td><td>ExaminationStart@17.89, NewCase@18.06, ExaminationEnd@19.95, ExaminationEnd@22.08</td></tr><tr><td>18</td><td>17.89</td><td>av. doctors: 0</td><td>NewCase@18.06, ExaminationEnd@19.95, ExaminationEnd@22.08, ExaminationEnd@23.95</td></tr><tr><td>19</td><td>18.06</td><td>av. doctors: 0</td><td>ExaminationEnd@19.95, ExaminationEnd@22.08, ExaminationEnd@23.95, NewCase@24.76</td></tr><tr><td>20</td><td>19.95</td><td>av. doctors: 0</td><td>ExaminationStart@19.96, ExaminationEnd@22.08, ExaminationEnd@23.95, NewCase@24.76</td></tr><tr><td>21</td><td>19.96</td><td>av. doctors: 0</td><td>ExaminationEnd@22.08, ExaminationEnd@23.95, NewCase@24.76, ExaminationEnd@27.37</td></tr><tr><td>22</td><td>22.08</td><td>av. doctors: 1</td><td>ExaminationEnd@23.95, NewCase@24.76, ExaminationEnd@27.37</td></tr><tr><td>23</td><td>23.95</td><td>av. doctors: 2</td><td>NewCase@24.76, ExaminationEnd@27.37</td></tr><tr><td>24</td><td>24.76</td><td>av. doctors: 1</td><td>ExaminationStart@24.77, ExaminationEnd@27.37, NewCase@27.97</td></tr><tr><td>25</td><td>24.77</td><td>av. doctors: 1</td><td>ExaminationEnd@27.37, NewCase@27.97, ExaminationEnd@32.74</td></tr><tr><td>26</td><td>27.37</td><td>av. doctors: 2</td><td>NewCase@27.97, ExaminationEnd@32.74</td></tr><tr><td>27</td><td>27.97</td><td>av. doctors: 1</td><td>ExaminationStart@27.98, NewCase@32.5, ExaminationEnd@32.74</td></tr><tr><td>28</td><td>27.98</td><td>av. doctors: 1</td><td>NewCase@32.5, ExaminationEnd@32.74, ExaminationEnd@36.51</td></tr><tr><td>29</td><td>32.5</td><td>av. doctors: 0</td><td>ExaminationStart@32.51, NewCase@32.73, ExaminationEnd@32.74, ExaminationEnd@36.51</td></tr><tr><td>30</td><td>32.51</td><td>av. doctors: 0</td><td>NewCase@32.73, ExaminationEnd@32.74, ExaminationEnd@36.51, ExaminationEnd@37.93</td></tr><tr><td>31</td><td>32.73</td><td>av. doctors: 0</td><td>ExaminationEnd@32.74, NewCase@34.02, ExaminationEnd@36.51, ExaminationEnd@37.93</td></tr><tr><td>32</td><td>32.74</td><td>av. doctors: 0</td><td>ExaminationStart@32.75, NewCase@34.02, ExaminationEnd@36.51, ExaminationEnd@37.93</td></tr><tr><td>33</td><td>32.75</td><td>av. doctors: 0</td><td>NewCase@34.02, ExaminationEnd@36.51, ExaminationEnd@37.93, ExaminationEnd@39.84</td></tr><tr><td>34</td><td>34.02</td><td>av. doctors: 0</td><td>ExaminationEnd@36.51, ExaminationEnd@37.93, ExaminationEnd@39.84, NewCase@40.99</td></tr><tr><td>35</td><td>36.51</td><td>av. doctors: 0</td><td>ExaminationStart@36.52, ExaminationEnd@37.93, ExaminationEnd@39.84, NewCase@40.99</td></tr><tr><td>36</td><td>36.52</td><td>av. doctors: 0</td><td>ExaminationEnd@37.93, ExaminationEnd@39.84, NewCase@40.99, ExaminationEnd@44.03</td></tr><tr><td>37</td><td>37.93</td><td>av. doctors: 1</td><td>ExaminationEnd@39.84, NewCase@40.99, ExaminationEnd@44.03</td></tr><tr><td>38</td><td>39.84</td><td>av. doctors: 2</td><td>NewCase@40.99, ExaminationEnd@44.03</td></tr><tr><td>39</td><td>40.99</td><td>av. doctors: 1</td><td>ExaminationStart@41, ExaminationEnd@44.03, NewCase@59.51</td></tr><tr><td>40</td><td>41</td><td>av. doctors: 1</td><td>ExaminationEnd@44.03, ExaminationEnd@47.52, NewCase@59.51</td></tr><tr><td>41</td><td>44.03</td><td>av. doctors: 2</td><td>ExaminationEnd@47.52, NewCase@59.51</td></tr><tr><td>42</td><td>47.52</td><td>av. doctors: 3</td><td>NewCase@59.51</td></tr><tr><td>43</td><td>59.51</td><td>av. doctors: 2</td><td>ExaminationStart@59.52, NewCase@66.71</td></tr><tr><td>44</td><td>59.52</td><td>av. doctors: 2</td><td>ExaminationEnd@64.6, NewCase@66.71</td></tr><tr><td>45</td><td>64.6</td><td>av. doctors: 3</td><td>NewCase@66.71</td></tr><tr><td>46</td><td>66.71</td><td>av. doctors: 2</td><td>ExaminationStart@66.72, NewCase@78.2</td></tr><tr><td>47</td><td>66.72</td><td>av. doctors: 2</td><td>ExaminationEnd@74.77, NewCase@78.2</td></tr><tr><td>48</td><td>74.77</td><td>av. doctors: 3</td><td>NewCase@78.2</td></tr><tr><td>49</td><td>78.2</td><td>av. doctors: 2</td><td>ExaminationStart@78.21, NewCase@80.27</td></tr><tr><td>50</td><td>78.21</td><td>av. doctors: 2</td><td>NewCase@80.27, ExaminationEnd@83.75</td></tr><tr><td>51</td><td>80.27</td><td>av. doctors: 1</td><td>ExaminationStart@80.28, NewCase@80.53, ExaminationEnd@83.75</td></tr><tr><td>52</td><td>80.28</td><td>av. doctors: 1</td><td>NewCase@80.53, ExaminationEnd@83.75, ExaminationEnd@89.82</td></tr><tr><td>53</td><td>80.53</td><td>av. doctors: 0</td><td>ExaminationStart@80.54, NewCase@80.77, ExaminationEnd@83.75, ExaminationEnd@89.82</td></tr><tr><td>54</td><td>80.54</td><td>av. doctors: 0</td><td>NewCase@80.77, ExaminationEnd@83.75, ExaminationEnd@89.62, ExaminationEnd@89.82</td></tr><tr><td>55</td><td>80.77</td><td>av. doctors: 0</td><td>NewCase@81.44, ExaminationEnd@83.75, ExaminationEnd@89.62, ExaminationEnd@89.82</td></tr></tbody></table><p>In the <a href="https://gwagner57.github.io/oes/js/Core2/Medical-Department-1c/index.html" target="_top">Medical-Department-1c</a> model, which is a variant of Medical-Department-1b, the count pool for doctors is replaced with an individual pool.</p></section><section><h4>2.3.1. A Simulation Scenario for Medical-Department-2</h4><p>The default simulation scenario for the <i>Medical-Department-2</i> model defines an initial state with three doctors in the individual pool &quot;doctors&quot;, two nurses in the individual pool &quot;nurses&quot; and three rooms in the count pool &quot;rooms&quot;:</p><pre>sim.scenario.durationInSimTime = 1000;
sim.scenario.<b>setupInitialState</b> = function () {
  const d1 = new Doctor({id: 1, status: oes.ResourceStatusEL.AVAILABLE}),
      d2 = new Doctor({id: 2, status: oes.ResourceStatusEL.AVAILABLE}),
      d3 = new Doctor({id: 3, status: oes.ResourceStatusEL.AVAILABLE}),
      n1 = new Nurse({id: 11, status: oes.ResourceStatusEL.AVAILABLE}),
      n2 = new Nurse({id: 12, status: oes.ResourceStatusEL.AVAILABLE});
  // Initialize the individual resource pools
  sim.resourcePools[&quot;doctors&quot;].availResources.push( d1, d2, d3);
  sim.resourcePools[&quot;nurses&quot;].availResources.push( n1, n2);
  // Initialize the count pools
  sim.resourcePools[&quot;rooms&quot;].available = 3;
  // Schedule initial events
  sim.FEL.add( new NewCase({occTime: 1}));
}</pre><p>You can <a href="https://gwagner57.github.io/oes/js/Core2/Medical-Department-2a/index.html" target="_top">run this Medical-Department-2a scenario</a> from the project's GitHub website. An example of a run of this scenario is shown in the following simulation log:</p><table border="1" id="SimScenarios__lot__2"><caption><span class="role-label">Table <span class="role-number">2-2</span>. </span>Simulation Log</caption><thead><tr><th>Step</th><th>Time</th><th>System State</th><th>Future Events</th></tr></thead><tbody><tr><td>1</td><td>1</td><td>Doctor-1{ st: 1}, Doctor-2{ st: 1}, Doctor-3{ st: 1}, Nurse-11{ st: 2}, Nurse-12{ st: 1} | av. nurses: n2, av. rooms: 2, av. doctors: d1,d2,d3</td><td>WalkToRoomStart{n1}@1.01, NewCase@1.85</td></tr><tr><td>2</td><td>1.01</td><td>Doctor-1{ st: 1}, Doctor-2{ st: 1}, Doctor-3{ st: 1}, Nurse-11{ st: 2, act: {WalkToRoom}}, Nurse-12{ st: 1} | av. nurses: n2, av. rooms: 2, av. doctors: d1,d2,d3</td><td>NewCase@1.85, WalkToRoomEnd{n1}@2.28</td></tr><tr><td>3</td><td>1.85</td><td>Doctor-1{ st: 1}, Doctor-2{ st: 1}, Doctor-3{ st: 1}, Nurse-11{ st: 2, act: {WalkToRoom}}, Nurse-12{ st: 2} | av. nurses: , av. rooms: 1, av. doctors: d1,d2,d3</td><td>WalkToRoomStart{n2}@1.86, WalkToRoomEnd{n1}@2.28, NewCase@6.27</td></tr><tr><td>4</td><td>1.86</td><td>Doctor-1{ st: 1}, Doctor-2{ st: 1}, Doctor-3{ st: 1}, Nurse-11{ st: 2, act: {WalkToRoom}}, Nurse-12{ st: 2, act: {WalkToRoom}} | av. nurses: , av. rooms: 1, av. doctors: d1,d2,d3</td><td>WalkToRoomEnd{n1}@2.28, WalkToRoomEnd{n2}@3.99, NewCase@6.27</td></tr><tr><td>5</td><td>2.28</td><td>Doctor-1{ st: 2}, Doctor-2{ st: 1}, Doctor-3{ st: 1}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 2, act: {WalkToRoom}} | av. nurses: n1, av. rooms: 1, av. doctors: d2,d3</td><td>ExaminationStart{ d1}@2.29, WalkToRoomEnd{n2}@3.99, NewCase@6.27</td></tr><tr><td>6</td><td>2.29</td><td>Doctor-1{ st: 2, act: {Examination}}, Doctor-2{ st: 1}, Doctor-3{ st: 1}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 2, act: {WalkToRoom}} | av. nurses: n1, av. rooms: 1, av. doctors: d2,d3</td><td>WalkToRoomEnd{n2}@3.99, NewCase@6.27, ExaminationEnd{ d1, }@10.83</td></tr><tr><td>7</td><td>3.99</td><td>Doctor-1{ st: 2, act: {Examination}}, Doctor-2{ st: 2}, Doctor-3{ st: 1}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 1, act: {}} | av. nurses: n1,n2, av. rooms: 1, av. doctors: d3</td><td>ExaminationStart{ d2}@4, NewCase@6.27, ExaminationEnd{ d1, }@10.83</td></tr><tr><td>8</td><td>4</td><td>Doctor-1{ st: 2, act: {Examination}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 1}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 1, act: {}} | av. nurses: n1,n2, av. rooms: 1, av. doctors: d3</td><td>NewCase@6.27, ExaminationEnd{ d1}@10.83, ExaminationEnd{ d2, }@13.28</td></tr><tr><td>9</td><td>6.27</td><td>Doctor-1{ st: 2, act: {Examination}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 1}, Nurse-11{ st: 2, act: {}}, Nurse-12{ st: 1, act: {}} | av. nurses: n2, av. rooms: 0, av. doctors: d3</td><td>WalkToRoomStart{n1}@6.28, NewCase@7.19, ExaminationEnd{ d1, }@10.83, ExaminationEnd{ d2}@13.28</td></tr><tr><td>10</td><td>6.28</td><td>Doctor-1{ st: 2, act: {Examination}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 1}, Nurse-11{ st: 2, act: {WalkToRoom}}, Nurse-12{ st: 1, act: {}} | av. nurses: n2, av. rooms: 0, av. doctors: d3</td><td>NewCase@7.19, WalkToRoomEnd{n1}@8.77, ExaminationEnd{ d1, }@10.83, ExaminationEnd{ d2}@13.28</td></tr><tr><td>11</td><td>7.19</td><td>Doctor-1{ st: 2, act: {Examination}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 1}, Nurse-11{ st: 2, act: {WalkToRoom}}, Nurse-12{ st: 1, act: {}} | av. nurses: n2, av. rooms: 0, av. doctors: d3</td><td>NewCase@8.5, WalkToRoomEnd{n1}@8.77, ExaminationEnd{ d1, }@10.83, ExaminationEnd{ d2}@13.28</td></tr><tr><td>12</td><td>8.5</td><td>Doctor-1{ st: 2, act: {Examination}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 1}, Nurse-11{ st: 2, act: {WalkToRoom}}, Nurse-12{ st: 1, act: {}} | av. nurses: n2, av. rooms: 0, av. doctors: d3</td><td>WalkToRoomEnd{n1}@8.77, ExaminationEnd{ d1}@10.83, NewCase@13.06, ExaminationEnd{ d2}@13.28</td></tr><tr><td>13</td><td>8.77</td><td>Doctor-1{ st: 2, act: {Examination}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 1}, Nurse-11{ st: 2, act: {}}, Nurse-12{ st: 1, act: {}} | av. nurses: n2, av. rooms: 0, av. doctors: d3</td><td>WalkToRoomStart{n1}@8.78, ExaminationEnd{ d1}@10.83, NewCase@13.06, ExaminationEnd{ d2}@13.28</td></tr><tr><td>14</td><td>8.78</td><td>Doctor-1{ st: 2, act: {Examination}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 1}, Nurse-11{ st: 2, act: {WalkToRoom}}, Nurse-12{ st: 1, act: {}} | av. nurses: n2, av. rooms: 0, av. doctors: d3</td><td>WalkToRoomEnd{n1}@10.66, ExaminationEnd{ d1}@10.83, NewCase@13.06, ExaminationEnd{ d2}@13.28</td></tr><tr><td>15</td><td>10.66</td><td>Doctor-1{ st: 2, act: {Examination}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 1}, Nurse-11{ st: 2, act: {}}, Nurse-12{ st: 1, act: {}} | av. nurses: n2, av. rooms: 0, av. doctors: d3</td><td>WalkToRoomStart{n1}@10.67, ExaminationEnd{ d1}@10.83, NewCase@13.06, ExaminationEnd{ d2}@13.28</td></tr><tr><td>16</td><td>10.67</td><td>Doctor-1{ st: 2, act: {Examination}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 1}, Nurse-11{ st: 2, act: {WalkToRoom}}, Nurse-12{ st: 1, act: {}} | av. nurses: n2, av. rooms: 0, av. doctors: d3</td><td>ExaminationEnd{ d1}@10.83, WalkToRoomEnd{n1}@12.65, NewCase@13.06, ExaminationEnd{ d2}@13.28</td></tr><tr><td>17</td><td>10.83</td><td>Doctor-1{ st: 2, act: {}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 1}, Nurse-11{ st: 2, act: {WalkToRoom}}, Nurse-12{ st: 1, act: {}} | av. nurses: n2, av. rooms: 0, av. doctors: d3</td><td>ExaminationStart{ d1}@10.84, WalkToRoomEnd{n1}@12.65, NewCase@13.06, ExaminationEnd{ d2}@13.28</td></tr><tr><td>18</td><td>10.84</td><td>Doctor-1{ st: 2, act: {Examination}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 1}, Nurse-11{ st: 2, act: {WalkToRoom}}, Nurse-12{ st: 1, act: {}} | av. nurses: n2, av. rooms: 0, av. doctors: d3</td><td>WalkToRoomEnd{n1}@12.65, NewCase@13.06, ExaminationEnd{ d2, }@13.28, ExaminationEnd{ d1}@15.87</td></tr><tr><td>19</td><td>12.65</td><td>Doctor-1{ st: 2, act: {Examination}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 2}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 1, act: {}} | av. nurses: n2,n1, av. rooms: 0, av. doctors:</td><td>ExaminationStart{ d3}@12.66, NewCase@13.06, ExaminationEnd{ d2}@13.28, ExaminationEnd{ d1}@15.87</td></tr><tr><td>20</td><td>12.66</td><td>Doctor-1{ st: 2, act: {Examination}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 2, act: {Examination}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 1, act: {}} | av. nurses: n2,n1, av. rooms: 0, av. doctors:</td><td>NewCase@13.06, ExaminationEnd{ d2}@13.28, ExaminationEnd{ d1, }@15.87, ExaminationEnd{ d3}@18.38</td></tr><tr><td>21</td><td>13.06</td><td>Doctor-1{ st: 2, act: {Examination}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 2, act: {Examination}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 1, act: {}} | av. nurses: n2,n1, av. rooms: 0, av. doctors:</td><td>ExaminationEnd{ d2}@13.28, ExaminationEnd{ d1}@15.87, NewCase@16.21, ExaminationEnd{ d3}@18.38</td></tr><tr><td>22</td><td>13.28</td><td>Doctor-1{ st: 2, act: {Examination}}, Doctor-2{ st: 2, act: {}}, Doctor-3{ st: 2, act: {Examination}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 1, act: {}} | av. nurses: n2,n1, av. rooms: 0, av. doctors:</td><td>ExaminationStart{ d2}@13.29, ExaminationEnd{ d1}@15.87, NewCase@16.21, ExaminationEnd{ d3}@18.38</td></tr><tr><td>23</td><td>13.29</td><td>Doctor-1{ st: 2, act: {Examination}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 2, act: {Examination}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 1, act: {}} | av. nurses: n2,n1, av. rooms: 0, av. doctors:</td><td>ExaminationEnd{ d1}@15.87, NewCase@16.21, ExaminationEnd{ d3, }@18.38, ExaminationEnd{ d2}@22.51</td></tr><tr><td>24</td><td>15.87</td><td>Doctor-1{ st: 1, act: {}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 2, act: {Examination}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 1, act: {}} | av. nurses: n2,n1, av. rooms: 1, av. doctors: d1</td><td>NewCase@16.21, ExaminationEnd{ d3}@18.38, ExaminationEnd{ d2, }@22.51</td></tr><tr><td>25</td><td>16.21</td><td>Doctor-1{ st: 1, act: {}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 2, act: {Examination}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 2, act: {}} | av. nurses: n1, av. rooms: 0, av. doctors: d1</td><td>WalkToRoomStart{n2}@16.22, NewCase@17.02, ExaminationEnd{ d3, }@18.38, ExaminationEnd{ d2}@22.51</td></tr><tr><td>26</td><td>16.22</td><td>Doctor-1{ st: 1, act: {}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 2, act: {Examination}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 2, act: {WalkToRoom}} | av. nurses: n1, av. rooms: 0, av. doctors: d1</td><td>WalkToRoomEnd{n2}@17, NewCase@17.02, ExaminationEnd{ d3, }@18.38, ExaminationEnd{ d2}@22.51</td></tr><tr><td>27</td><td>17</td><td>Doctor-1{ st: 1, act: {}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 2, act: {Examination}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 2, act: {}} | av. nurses: n1, av. rooms: 0, av. doctors: d1</td><td>WalkToRoomStart{n2}@17.01, NewCase@17.02, ExaminationEnd{ d3, }@18.38, ExaminationEnd{ d2}@22.51</td></tr><tr><td>28</td><td>17.01</td><td>Doctor-1{ st: 1, act: {}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 2, act: {Examination}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 2, act: {WalkToRoom}} | av. nurses: n1, av. rooms: 0, av. doctors: d1</td><td>NewCase@17.02, ExaminationEnd{ d3}@18.38, WalkToRoomEnd{n2, }@19.47, ExaminationEnd{ d2}@22.51</td></tr><tr><td>29</td><td>17.02</td><td>Doctor-1{ st: 1, act: {}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 2, act: {Examination}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 2, act: {WalkToRoom}} | av. nurses: n1, av. rooms: 0, av. doctors: d1</td><td>ExaminationEnd{ d3}@18.38, WalkToRoomEnd{n2}@19.47, NewCase@19.67, ExaminationEnd{ d2}@22.51</td></tr><tr><td>30</td><td>18.38</td><td>Doctor-1{ st: 1, act: {}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 2, act: {}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 2, act: {WalkToRoom}} | av. nurses: n1, av. rooms: 0, av. doctors: d1</td><td>ExaminationStart{ d3}@18.39, WalkToRoomEnd{n2}@19.47, NewCase@19.67, ExaminationEnd{ d2}@22.51</td></tr><tr><td>31</td><td>18.39</td><td>Doctor-1{ st: 1, act: {}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 2, act: {Examination}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 2, act: {WalkToRoom}} | av. nurses: n1, av. rooms: 0, av. doctors: d1</td><td>WalkToRoomEnd{n2}@19.47, NewCase@19.67, ExaminationEnd{ d2, }@22.51, ExaminationEnd{ d3}@27.41</td></tr><tr><td>32</td><td>19.47</td><td>Doctor-1{ st: 1, act: {}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 2, act: {Examination}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 2, act: {}} | av. nurses: n1, av. rooms: 0, av. doctors: d1</td><td>WalkToRoomStart{n2}@19.48, NewCase@19.67, ExaminationEnd{ d2, }@22.51, ExaminationEnd{ d3}@27.41</td></tr><tr><td>33</td><td>19.48</td><td>Doctor-1{ st: 1, act: {}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 2, act: {Examination}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 2, act: {WalkToRoom}} | av. nurses: n1, av. rooms: 0, av. doctors: d1</td><td>NewCase@19.67, WalkToRoomEnd{n2}@20.95, ExaminationEnd{ d2, }@22.51, ExaminationEnd{ d3}@27.41</td></tr><tr><td>34</td><td>19.67</td><td>Doctor-1{ st: 1, act: {}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 2, act: {Examination}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 2, act: {WalkToRoom}} | av. nurses: n1, av. rooms: 0, av. doctors: d1</td><td>WalkToRoomEnd{n2}@20.95, ExaminationEnd{ d2}@22.51, ExaminationEnd{ d3}@27.41, NewCase@28.91</td></tr><tr><td>35</td><td>20.95</td><td>Doctor-1{ st: 1, act: {}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 2, act: {Examination}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 2, act: {}} | av. nurses: n1, av. rooms: 0, av. doctors: d1</td><td>WalkToRoomStart{n2}@20.96, ExaminationEnd{ d2}@22.51, ExaminationEnd{ d3}@27.41, NewCase@28.91</td></tr><tr><td>36</td><td>20.96</td><td>Doctor-1{ st: 1, act: {}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 2, act: {Examination}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 2, act: {WalkToRoom}} | av. nurses: n1, av. rooms: 0, av. doctors: d1</td><td>ExaminationEnd{ d2}@22.51, WalkToRoomEnd{n2}@23.2, ExaminationEnd{ d3}@27.41, NewCase@28.91</td></tr><tr><td>37</td><td>22.51</td><td>Doctor-1{ st: 1, act: {}}, Doctor-2{ st: 2, act: {}}, Doctor-3{ st: 2, act: {Examination}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 2, act: {WalkToRoom}} | av. nurses: n1, av. rooms: 0, av. doctors: d1</td><td>ExaminationStart{ d2}@22.52, WalkToRoomEnd{n2}@23.2, ExaminationEnd{ d3}@27.41, NewCase@28.91</td></tr><tr><td>38</td><td>22.52</td><td>Doctor-1{ st: 1, act: {}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 2, act: {Examination}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 2, act: {WalkToRoom}} | av. nurses: n1, av. rooms: 0, av. doctors: d1</td><td>WalkToRoomEnd{n2}@23.2, ExaminationEnd{ d3}@27.41, NewCase@28.91, ExaminationEnd{ d2}@30.15</td></tr><tr><td>39</td><td>23.2</td><td>Doctor-1{ st: 2, act: {}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 2, act: {Examination}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 1, act: {}} | av. nurses: n1,n2, av. rooms: 0, av. doctors:</td><td>ExaminationStart{ d1}@23.21, ExaminationEnd{ d3}@27.41, NewCase@28.91, ExaminationEnd{ d2}@30.15</td></tr><tr><td>40</td><td>23.21</td><td>Doctor-1{ st: 2, act: {Examination}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 2, act: {Examination}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 1, act: {}} | av. nurses: n1,n2, av. rooms: 0, av. doctors:</td><td>ExaminationEnd{ d3}@27.41, NewCase@28.91, ExaminationEnd{ d2, }@30.15, ExaminationEnd{ d1}@31.35</td></tr><tr><td>41</td><td>27.41</td><td>Doctor-1{ st: 2, act: {Examination}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 2, act: {}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 1, act: {}} | av. nurses: n1,n2, av. rooms: 0, av. doctors:</td><td>ExaminationStart{ d3}@27.42, NewCase@28.91, ExaminationEnd{ d2}@30.15, ExaminationEnd{ d1}@31.35</td></tr><tr><td>42</td><td>27.42</td><td>Doctor-1{ st: 2, act: {Examination}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 2, act: {Examination}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 1, act: {}} | av. nurses: n1,n2, av. rooms: 0, av. doctors:</td><td>NewCase@28.91, ExaminationEnd{ d2}@30.15, ExaminationEnd{ d1, }@31.35, ExaminationEnd{ d3}@33.7</td></tr><tr><td>43</td><td>28.91</td><td>Doctor-1{ st: 2, act: {Examination}}, Doctor-2{ st: 2, act: {Examination}}, Doctor-3{ st: 2, act: {Examination}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 1, act: {}} | av. nurses: n1,n2, av. rooms: 0, av. doctors:</td><td>ExaminationEnd{ d2}@30.15, ExaminationEnd{ d1}@31.35, ExaminationEnd{ d3}@33.7, NewCase@34.09</td></tr><tr><td>44</td><td>30.15</td><td>Doctor-1{ st: 2, act: {Examination}}, Doctor-2{ st: 1, act: {}}, Doctor-3{ st: 2, act: {Examination}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 1, act: {}} | av. nurses: n1,n2, av. rooms: 1, av. doctors: d2</td><td>ExaminationEnd{ d1}@31.35, ExaminationEnd{ d3}@33.7, NewCase@34.09</td></tr><tr><td>45</td><td>31.35</td><td>Doctor-1{ st: 1, act: {}}, Doctor-2{ st: 1, act: {}}, Doctor-3{ st: 2, act: {Examination}}, Nurse-11{ st: 1, act: {}}, Nurse-12{ st: 1, act: {}} | av. nurses: n1,n2, av. rooms: 2, av. doctors: d2,d1</td><td>ExaminationEnd{ d3}@33.7, NewCase@34.09</td></tr></tbody></table></section></section><section class="role-section1" id="SimStatistics"><h2 class="role-section1-title"><span class="role-label">Section <span class="role-number">2.4</span>. </span>Statistics</h2><p>In activity-based Discrete Event Simulation, a simulator can automatically collect the following statistics per activity type and simulation run: </p><ol><li>Throughput quantities: (a) number of enqueued activities, (b) number of started activities (= number of dequeued activities), and (c) number of completed activities.</li><li>Queue length statistics: maximum queue length, average queue length, etc.</li><li>Waiting time statistics: maximum waiting time, average waiting time, etc.</li><li>Cycle time statistics: maximum cycle time, average cycle time, etc.</li><li>Resource utilization per resource object.</li></ol><p>For instance, after running the <a href="https://gwagner57.github.io/oes/js/Core2/Medical-Department-2/index.html" target="_top">Medical-Department-2 scenario</a> , the following statistics results are shown per activity type:</p><table border="1" id="SimStatistics__lot__3"><caption><span class="role-label">Table <span class="role-number">2-3</span>. </span>Statistics</caption><tbody><tr><td colspan="2">Per activity type</td></tr><tr><td>WalkToRoom</td><td>{&quot;queueLength&quot;:{&quot;max&quot;:1}, &quot;resUtil&quot;:{&quot;11&quot;:0.17,&quot;12&quot;:0.13,&quot;rooms&quot;:0.1}, &quot;waitingTime&quot;:{&quot;max&quot;:0.78}, &quot;cycleTime&quot;:{&quot;max&quot;:3.07}, &quot;enqueuedActivities&quot;:22, &quot;dequeuedActivities&quot;:21, &quot;startedActivities&quot;:21, &quot;completedActivities&quot;:20}</td></tr><tr><td>Examination</td><td>{&quot;queueLength&quot;:{&quot;max&quot;:2}, &quot;resUtil&quot;:{&quot;1&quot;:0.38,&quot;2&quot;:0.4,&quot;3&quot;:0.44,&quot;rooms&quot;:0.4}, &quot;waitingTime&quot;:{&quot;max&quot;:1.99}, &quot;cycleTime&quot;:{&quot;max&quot;:10.16}, &quot;enqueuedActivities&quot;:20, &quot;dequeuedActivities&quot;:20, &quot;startedActivities&quot;:20, &quot;completedActivities&quot;:18}</td></tr></tbody></table></section><section class="role-section1" id="SimExperiments"><h2 class="role-section1-title"><span class="role-label">Section <span class="role-number">2.5</span>. </span>Simulation Experiments</h2><p>There are different types of simulation experiments. In a <em>simple experiment</em>, a simulation scenario is run repeatedly by defining a number of replications (iterations) for being able to compute average statistics.</p><p>In a <em>parameter variation experiment</em>, several variants of a simulation scenario (called <em>experiment scenarios</em>), are defined by defining value sets for certain <em>model parameters</em> (the <em>experiment parameters</em>), such that a parameter variation experiment run consists of a set of experiment scenario runs, one for each combination of parameter values.</p><p>An experiment type is defined for a given simulation model and an experiment of that type is run on top of a given simulation scenario for that model.</p><p>When running an experiment, the resulting statistics data are stored in a database, which allows looking them up later on or exporting them to data analysis tools (such as Microsoft Excel or RStudio)</p><section><h4>2.6.1. Simple Experiments</h4><p>A simple experiment type is defined with a <code>sim.experimentType</code> record on top of a model by defining (1) the number of <em>replications</em> and (2) possibly a list of <em>seed values</em>, one for each replication. The following code shows an example of a simple experiment type definition:</p><table class="role-listing" style="width: 100%; border-collapse: collapse;"><colgroup class="listing-numbers-column" style="width: 2.0em;"></colgroup><tbody style="vertical-align: baseline;"><tr><td class="listing-numbers"><pre style="text-align: right; background-color: transparent; border-style: none; padding: 0; margin: 0;">1
2
3
4
5</pre></td><td class="listing-lines"><pre style="text-align: left; background-color: transparent; border-style: none; padding: 0; margin: 0;">sim.experimentType = {
  title: &quot;Simple Experiment with 10 replications, each running for 1000 time units (days)&quot;,
  nmrOfReplications: 10,
  seeds: [123, 234, 345, 456, 567, 678, 789, 890, 901, 1012]
};</pre></td></tr></tbody></table><p>Running this simple experiment means running the underlying scenario 10 times, each time with another random seed, as specified by the list of seeds. The resulting statistics are composed of the user-defined statistics and the generic statistics (per activity type) for each replication complemented with a summary statistics listing averages, standard deviations, min/max values and confidence intervals.</p><p>When no seeds are defined, the experiment is run with implicit random seeds using JavaScript's built-in random number generator, which implies that experiment runs are not reproducible.</p><p>The following table shows the experiment results of a simple experiment defined for the <a href="https://gwagner57.github.io/oes/js/Core2/Medical-Department-1c/index.html" target="_top">Medical-Department-1c</a> model.</p><table border="1" id="SimExperiments__lot__4" style="overflow-x: auto;"><caption><span class="role-label">Table <span class="role-number">2-4</span>. </span>Experiment Results</caption><thead><tr><th rowspan="3">Replication</th><th colspan="6">Statistics per activity type</th></tr><tr><th colspan="6">Examination</th></tr><tr><th>enqu</th><th>start</th><th>compl</th><th>qLen</th><th>wTime</th><th>cTime</th></tr></thead><tbody><tr><td>1</td><td>284</td><td>283</td><td>282</td><td>5</td><td>12.36</td><td>20.06</td></tr><tr><td>2</td><td>314</td><td>314</td><td>314</td><td>6</td><td>13.28</td><td>22.66</td></tr><tr><td>3</td><td>297</td><td>296</td><td>294</td><td>8</td><td>20.77</td><td>29.25</td></tr><tr><td>4</td><td>298</td><td>297</td><td>296</td><td>8</td><td>15.28</td><td>22.66</td></tr><tr><td>5</td><td>296</td><td>295</td><td>292</td><td>5</td><td>14.44</td><td>21.92</td></tr><tr><td>6</td><td>318</td><td>318</td><td>316</td><td>16</td><td>40.64</td><td>50.23</td></tr><tr><td>7</td><td>299</td><td>299</td><td>298</td><td>8</td><td>18.21</td><td>25.75</td></tr><tr><td>8</td><td>334</td><td>327</td><td>325</td><td>12</td><td>30.8</td><td>40.35</td></tr><tr><td>9</td><td>296</td><td>295</td><td>292</td><td>7</td><td>16.82</td><td>25.79</td></tr><tr><td>10</td><td>302</td><td>301</td><td>299</td><td>6</td><td>13.12</td><td>22.1</td></tr><tr><td>Average</td><td>303.8</td><td>302.5</td><td>300.8</td><td>8.1</td><td>19.57</td><td>28.08</td></tr><tr><td>Std.dev.</td><td>14.29</td><td>13.13</td><td>13.25</td><td>3.45</td><td>9.18</td><td>9.72</td></tr><tr><td>Minimum</td><td>284</td><td>283</td><td>282</td><td>5</td><td>12.36</td><td>20.06</td></tr><tr><td>Maximum</td><td>334</td><td>327</td><td>325</td><td>16</td><td>40.64</td><td>50.23</td></tr><tr><td>CI Lower</td><td>294.8</td><td>294.6</td><td>292.7</td><td>5.9</td><td>13.67</td><td>21.51</td></tr><tr><td>CI Upper</td><td>311.5</td><td>309.7</td><td>308.2</td><td>9.9</td><td>24.25</td><td>32.99</td></tr></tbody></table></section><section><h4>2.6.2. Parameter Variation Experiments</h4><p>A parameter variation experiment is defined with (1) a number of <em>replications</em>, (2) a list of <em>seed values</em> (one for each replication), and (3) one or more experiment parameters. </p><p>An experiment parameter must have the same name as the model parameter to which it refers. It defines a set of values for this model variable, either using a <code>values</code> field or a combination of a <code>startValue</code> and <code>endValue</code> field (and <code>stepSize</code> for a non-default increment value) as in the following example.</p><p>The following code shows an example of a parameter variation experiment definition (on top of the <a href="https://gwagner57.github.io/oes/js/Core1/Inventory-Management/index.html">Inventory-Management</a> simulation model):</p><table class="role-listing" style="width: 100%; border-collapse: collapse;"><colgroup class="listing-numbers-column" style="width: 2.25em;"></colgroup><tbody style="vertical-align: baseline;"><tr><td class="listing-numbers"><pre style="text-align: right; background-color: transparent; border-style: none; padding: 0; margin: 0;">1
2
3
4
5
6
7
8
9
10
11</pre></td><td class="listing-lines"><pre style="text-align: left; background-color: transparent; border-style: none; padding: 0; margin: 0;">sim.experimentTypes[1] = {
  id: 1,
  title: &quot;Parameter variation experiment for exploring reorderInterval and targetInventory&quot;,
  nmrOfReplications: 10,
  seeds: [123, 234, 345, 456, 567, 678, 789, 890, 901, 1012],
  <b>parameterDefs</b>: [
    {name:&quot;reviewPolicy&quot;, values:[&quot;periodic&quot;]},
    {name:&quot;reorderInterval&quot;, values:[2,3,4]},
    {name:&quot;targetInventory&quot;, startValue:80, endValue:100, stepSize:10},
  ]
};</pre></td></tr></tbody></table><p>Notice that this experiment definition defines 9 experiment scenarios resulting from the combinations of the values 2/3/4 and 80/90/100 for the parameters <i>reorderInterval</i> and <i>targetInventory</i>. Running this parameter variation experiment means running each of the 9 experiment scenarios 10 times (each time with another random seed, as specified by the list of seeds). The resulting statistics, as shown in the following table, is computed by averaging all statistics variables defined for the given model. </p><table border="1" class="expStatistics" id="SimExperiments__simLogTbl"><thead><tr><th colspan="5">Experiment Results</th></tr><tr><th rowspan="2">Experiment scenario</th><th rowspan="2">Parameter values</th><th colspan="3">Statistics</th></tr><tr><th>nmrOfStockOuts</th><th>lostSales</th><th>serviceLevel</th></tr></thead><tbody id="SimExperiments__simLog"><tr><td>0</td><td>periodic,2,80</td><td>21.8</td><td>180.7</td><td>97.82</td></tr><tr><td>1</td><td>periodic,2,90</td><td>7.4</td><td>55.9</td><td>99.26</td></tr><tr><td>2</td><td>periodic,2,100</td><td>2.1</td><td>15.8</td><td>99.79</td></tr><tr><td>3</td><td>periodic,3,80</td><td>86.6</td><td>855.6</td><td>91.34</td></tr><tr><td>4</td><td>periodic,3,90</td><td>40.6</td><td>377.5</td><td>95.94</td></tr><tr><td>5</td><td>periodic,3,100</td><td>16.3</td><td>139.8</td><td>98.37</td></tr><tr><td>6</td><td>periodic,4,80</td><td>171.5</td><td>2067.5</td><td>82.85</td></tr><tr><td>7</td><td>periodic,4,90</td><td>110.6</td><td>1238.3</td><td>88.94</td></tr><tr><td>8</td><td>periodic,4,100</td><td>63.8</td><td>661.4</td><td>93.62</td></tr></tbody></table></section><section><h4>2.6.1. Storage and Export of Experiment Results</h4><p>In OESjs-Core1, an experiment's output statistics data is stored in a browser-managed database using JavaScript's <em>IndexedDB</em> technology. The name of this database is the same as the name of the simulation model. It can be inspected with the help of the browser's developer tools, which are typically activated with the key combination [Shift]+[Ctrl]+[I]. For instance, in Google's <em>Chrome</em> browser, one has to go to Application/Storage/IndexedDB.</p><p>The experiment statistics database consists of three tables containing data about (1) experiment runs, (2) experiment scenarios, and (3) experiment scenario runs, which can be exported to a CSV file. </p><section></section></section></section></section><section class="role-chapter" id="chapter-1"><h1 class="role-chapter-title"><span class="role-label">Chapter <span class="role-number">3</span>. </span>Special Issues in Activity-Based Modeling</h1><section class="role-section1" id="Resources-out-of-order"><h2 class="role-section1-title"><span class="role-label">Section <span class="role-number">3.1</span>. </span>Out-of-Order and Out-of-Duty Resources</h2><p>For various reasons, resources can go out of order: machines may fail or have to get maintenance, nurses or doctors may get sick. Human resources can also be out-of-duty or off-shift.</p></section><section class="role-section1" id="Waiting-Timeouts"><h2 class="role-section1-title"><span class="role-label">Section <span class="role-number">3.2</span>. </span>Waiting Timeouts</h2><p>In certain cases, enqueued activities may have a <em>waiting timeout</em>, which means that such an enqueued activity will not be started, but removed from the queue, if its waiting time is longer than its timeout. This mechanism can be used for modeling the behavior of humans loosing patience in a queue called <em>reneging</em> in queuing theory. For instance, in the following DPMN diagram, the activity <i>TakeOrder</i> has a waiting timeout:</p><figure id="Waiting-Timeouts__figServiceDesk0"><div><img alt="???" height="57" src="tutorial_files/TakeOrder-Reneging_PDM.png" width="189" /></div></figure><p>In OESjs, this can be coded by defining a class-level (&quot;static&quot;) function <code>waitingTimeout</code> in a resource-constrained activity class, as shown in the following example. Typically, the timeout (or maximum waiting time) provided by such a function is sampled from a probability distribution function.</p><pre>class <b>TakeOrder</b> extends aCTIVITY {
  constructor({id, startTime, duration}={}) {
    super({id, startTime, duration});
  }
  static duration() {
    return rand.uniform( 1, 4);
  }
  static <b>waitingTimeout</b>() {
    return rand.uniformInt( 3, 6);
  }
}</pre></section><section class="role-section1" id="Admissible-Resources"><h2 class="role-section1-title"><span class="role-label">Section <span class="role-number">3.3</span>. </span>Admissible Resources</h2><p>When activities admit using more resources than required, this means they can be started as soon as the required number of resources are available, but they can also be started with a greater number of resources, typically implying a faster performance.</p></section><section class="role-section1" id="OrganizationalPositions"><h2 class="role-section1-title"><span class="role-label">Section <span class="role-number">3.4</span>. </span>Organizational Positions and Resource Pools</h2><p>Since a business process happens in the context of an organization (as its owner), it is natural to consider the concept of organizational positions. </p><p>Any <em>performer role</em> of an activity type has a <em>performer type</em> as its range. For instance, in the following <abbr title="Object Event">OE</abbr> class design model, the (implicitly named) performer role <i>orderTaker</i> of the activity type <i>TakeOrder</i> has the performer type <i>OrderTaker</i> as its range. Likewise the object type <i>PizzaMaker</i> is a performer type.</p><p>Each performer type corresponds to an organizational position. For instance, in the following <abbr title="Object Event">OE</abbr> class model, both <i>OrderTaker</i> and <i>PizzaMaker</i> are organizational positions, for which an organization hires a number of human resources, forming corresponding resource pools (called <i>orderTakers</i> and <i>pizzaMakers</i>). These resource pools correspond to the direct populations of the two organizational positions.</p><figure><img alt="conceptual information model describing object, event and activity types" src="tutorial_files/Pizzeria-AlternativeResourceSubtyping_IDM.svg" width="450" /></figure><p>An organizational position may subsume more than one performer role. In the model above, the organizational position <i>PizzaMaker</i> is an alternative resource subtype of the organizational position <i>OrderTaker</i>, as indicated by the generalization arrow of category </p><h4>Resource Pools Assigned to Multiple Activity Types</h4><p>When a resource pool represents an organizational position charged with playing <i>n</i> performer roles, it is used by all <i>n</i> corresponding activity types.</p></section><section class="role-section1" id="Alternative-resources"><h2 class="role-section1-title"><span class="role-label">Section <span class="role-number">3.5</span>. </span>Alternative Resources</h2><p>Certain activities allow alternative resources, when no standard resources are available. For instance, in a pizza service company, when no order taker is available, and a new order call comes in, an available pizza baker can take the order. Or in a hospital, where nurses guide patients to an examination room, when no nurse is available, a receptionist can guide a patient to an examination room.</p><p>The general conceptual pattern is that for certain types of activities <i>A</i> (like <i>GuideToRoom</i>), a resource role <i>r</i> (like <i>guide</i>) may be played not only by instances of its direct resource type <i>R</i> (like <i>Guide</i>), but also by instances of an alternative resource type <i>R'</i> (like <i>ExaminationAssistant</i>) or an organizational position <i>P</i> (like <i>Nurse</i>), if they are a subtypes of <i>R</i> (<i>Guide</i>).</p><p>When the resource type <i>R</i> is not abstract, then its instances are the preferred resources of activities of type <i>A</i>, and its (possibly preference-rank-annotated) Â«arÂ» subtypes specify types of alternative resources.</p><h4>Preferred and Alternative Resource Pools</h4><p>Resource roles, resource types, organizational positions and resource pools are defined in an <abbr style="Object-Event">OE</abbr> class design model. Each resource role has a resource type or an organizational position as its range and an assigned resource pool . </p><p>By default, for any non-abstract resource type <i>R</i> and for any organizational position <i>P</i> assigned as the range of a resource role <i>r</i>, an <abbr style="Object-Event">OE</abbr> simulator can create a resource pool with the same (yet pluralized) name, pooling objects instantiating <i>R</i> or <i>P</i>, and assign it to <i>r</i> as the preferred resource pool. </p></section><section class="role-section1" id="Task-priorities"><h2 class="role-section1-title"><span class="role-label">Section <span class="role-number">3.6</span>. </span>Task Priorities</h2><p>Whenever an activity of type A1 ends and there is still another A1 task in the queue, the activity's resources would be re-used for the next A1 task unless there is another task (say, of type A2) with higher priority waiting for one of the resources (r1). In that case, r1 is allocated to that task, and all other resources are allocated to the next A1 task, which still has to wait for r1 becoming available again.</p><p>For example, in a pizza service, where incoming orders can be taken by pizza makers, and <i>TakeOrder</i> tasks have a higher priority than <i>MakePizza</i> tasks, when a <i>MakePizza</i> activity performed by a pizza maker in an oven ends while there is still another <i>MakePizza</i> task in the queue and there is also a <i>TakeOrder</i> task in the queue, the pizza maker is allocated to the <i>TakeOrder</i> task and the oven is allocated to the next <i>MakePizza</i> task, which has to wait for a pizza maker becoming available.</p><p><b>Algorithmically</b>: Whenever an activity a1 of type A1 ends, collect all pairs &lt;r, t&gt; such that r is a resource used by a1 and t is the next task of an activity type A from the dependent activity types DAT of pool(r) with the highest priority among all DAT with task priorities higher than A1. For all these pairs &lt;r, t&gt;, allocate r to t. Allocate the remaining resources of a1 to the next A1 task, if there is any, otherwise release them. </p><p></p></section><section class="role-section1" id="Task-preemption"><h2 class="role-section1-title"><span class="role-label">Section <span class="role-number">3.7</span>. </span>Task Preemption</h2><p></p></section></section><section class="role-appendix" id="appendix-1"><h1 class="role-appendix-title"><span class="role-label">Appendix <span class="role-number">A</span>. </span>Further Example Models</h1><section class="role-section1" id="Make-and-Deliver-Pizza"><h2 class="role-section1-title"><span class="role-label">Section <span class="role-number">A.1</span>. </span>Make and Deliver Pizza</h2><figure style="float:right"><div><img alt="???" src="tutorial_files/Pizza-Delivery.svg" width="150" /></div><small>Image by <a href="https://www.flaticon.com/authors/monkik">monkik</a></small></figure><p>A pizza service company takes phone orders for making and delivering pizzas, with the help of order takers, pizza makers, ovens and a crew of pizza delivery scooter drivers. From time to time the order takers cannot cope with the number of incoming calls, and then customers grow impatient and hang up the phone without placing an order.</p><p>For getting a quick impression, you can <a href="https://gwagner57.github.io/oes/js/Core2/Make-and-Deliver-Pizza-AN-1/">run this model</a> from the OES GitHub website, or inspect its <a href="https://github.com/gwagner57/oes/tree/master/JavaScript/Core2/Make-and-Deliver-Pizza-1">OESjs code</a>. </p><p>Since there is a high number of lost orders due to long waiting times in the first model, assigning different responsibilities to organizational roles for allowing a more flexible use of human resources is considered in a variant of the first model.</p><blockquote class="role-note"><p>Our <em>Make-and-Deliver-Pizza</em> modeling problem is based on the chapter &quot;Example Model 3: Pizzeria operation&quot; in the book <a href="https://www.anylogic.com/resources/books/the-art-of-process-centric-modeling-with-anylogic/">The Art of Process-Centric Modeling with AnyLogic</a> by Arash Mahdavi.</p></blockquote><details open="open"><summary>Conceptual Model</summary><p>A pizza service company has resource pools for order takers, pizza makers, pizza ovens, delivery staff and scooters. While <em>take order</em> activities are performed by an <em>order taker</em>, <em>make pizza</em> activities require both an <em>oven</em> and a <em>pizza maker</em>. Finally, <i><em>deliver</em> pizza</i> activities require a delivery staff member and a scooter.</p><details open="open"><summary>Conceptual Information Model</summary><p>The potentially relevant object types are:</p><ol><li>pizza service company,</li><li>customers,</li><li>orders,</li><li>pizzas,</li><li>order takers,</li><li>pizza makers,</li><li>pizza ovens</li><li>delivery scooter drivers,</li><li>scooters.</li></ol><p>Potentially relevant types of events and activities are:</p><ol><li>pizza ordering calls coming in from customers,</li><li>order taking (an activity performed by order takers),</li><li>customers hanging up the phone when having to wait for too long,</li><li>pizza making (performed by pizza makers using ovens),</li><li>pizza delivery (performed by delivery staff using scooters).</li></ol><p>Object, event and activity types, together with their participation associations, can be visually described in a conceptual information model in the form of a special kind of UML class diagram, called Object Event (<abbr title="Object Event">OE</abbr>) class diagram, as shown below.</p><figure><img alt="conceptual information model describing object, event and activity types" src="tutorial_files/Pizzeria_CIMa.svg" width="450" /></figure><p>The association end annotations Â«rrÂ» and Â«rpÂ» denote <em>resource roles</em> and <em>resource pools</em>. For instance, the activity type <i>make pizza</i> has two resource roles, <i>pizza maker</i>s and <i>oven</i>. A pizza service company has resource pools for order takers, pizza makers, ovens, delivery scooter drivers and scooters. </p><p>Resource roles have resource cardinality constraints. For instance, a <i>make pizza</i> activity requires 2 pizza makers and 1 oven.</p><p>A conceptual <abbr title="Object Event">OE</abbr> class diagram like the one above, describes resource roles (like <i>oven</i>), resource role types (like <i>ovens</i>) and resource cardinality constraints (like &quot;exactly 1&quot;) for all types of activities. </p><p>An organization defines <em>organizational positions</em>, which are filled by human resources. Each organizational position is characterized by a set of human resource roles to be played by position holders. In the Pizza Service organization, there are three positions: order takers, pizza makers and delivery scooter drivers.</p><blockquote class="role-attention"><p>Strictly speaking, <i>order phone calls</i> are immediate (zero duration) events while a <i>take order</i> activity is an event with a non-zero duration. For simplicity, though, we'll often say &quot;events&quot; instead of &quot;immediate events&quot; or &quot;objects, events and activities&quot; instead of &quot;objects, immediate events and activities&quot;.</p></blockquote></details><details open="open"><summary>Conceptual Process Model</summary><p>The following BPMN diagram shows a conceptual process model of the Make-and-Deliver-Pizza business process, with three swimlanes for the three performers of the process:</p><figure><img alt="A conceptual process model in the form of a BPMN diagram" src="tutorial_files/Pizzeria_CPM_BPMN.svg" width="500" /></figure><p>Notice the BPMN Boundary Timeout Event circle attached to the <i>take order</i> activity representing timeout events that cancel the activity. They are supposed to model the <em>reneging</em> behavior of waiting customers loosing their patience and hanging up the phone without placing an order. However, BPMN does not allow restricting such a timeout mechanism to the waiting phase of a planned activity, that is the time span during which the planned activity has been enqueued, but not yet started. Rather, it applies to the entire cycle time of <i>take order</i> activities, which means that also started activities, where the order taker is already listening to the customer, may be canceled due to reneging.</p><p>While BPMN allows modeling the performers of activities with swimlanes, it does not support modeling other types of resource objects. As a workaround, we have included the resource objects <i>oven</i>s and <i>scooter</i>s in the form of BPMN Data Objects.</p><p>The third, and most severe, issue of the BPMN model is its uniform (semantically overloaded) use of &quot;sequence flow&quot; arrows for sequencing events and activities. While in the case of all three activities, incoming &quot;sequence flow&quot; arrows do not mean that an activity is started, but rather that a new planned activity is enqueued (and only started when all required resources become available), in the case of the event <i>lost order</i>, the incoming &quot;sequence flow&quot; arrow means that a new event is scheduled to occur immediately.</p><p>These three issues of BPMN have been solved in DPMN, where <em>resource-dependent activity scheduling (RDAS) arrows</em> are distinguished from <em>event scheduling arrows</em>, as shown in the following DPMN process diagram:</p><figure><img alt="A conceptual process model in the form of a DPMN diagram" src="tutorial_files/Pizzeria_CPM.svg" width="500" /></figure><p>Notice how the timeout event circle (with a clock icon) is attached to the three bars of the <abbr title="resource-dependent activity scheduling">RDAS</abbr> arrow representing the queue of planned order taking activities waiting for the availability of an order taker. This implies that the timeout applies to the waiting phase only, and not to the entire order taking activity.</p><p>A conceptual DPMN process diagram does normally not include any element representing a resource pool. Yet, it may display the performer roles of activity types, like <i>order taker</i> and <i>pizza maker </i> in the diagram above. It is assumed that for any organizational position described in the underlying <abbr title="Object Event">OE</abbr> class model, the organization under consideration has a corresponding resource pool.</p></details></details><details open="open"><summary>Simulation Design</summary><p>In our simulation design, we make the following simplifications. We consider only one particular pizza service company, which does not have to be modeled as an explicit object. Also, we abstract away from individual customers, orders and pizzas. And we merge the resource roles <i>delivery scooter driver</i> and <i>scooter</i>, keeping only <i>scooter</i>s as resources of <i>deliver pizza</i> activities.</p><p>We consider a scenario with two order takers, ten pizza makers, five ovens and 20 scooters.</p><details open="open"><summary>Information Design Model</summary><p>An information design model, in the form of an <abbr title="Object Event">OE</abbr> class diagram as shown below, is derived from a conceptual information model by </p><ol><li>Abstracting away from items that are not design-relevant.</li><li>Adding properties, functions and methods to object, event and activity classes. In particular, a <i>status</i> attribute is added to all resource object types, such as <i>OrderTaker</i> and <i>Oven</i>, and a class-level <i>duration</i> function is added to all activity classes.</li></ol><figure id="Make-and-Deliver-Pizza__figMakeAndDeliverPizzaIDM"><img alt="???" src="tutorial_files/Pizzeria_IDMa.svg" width="500" /><figcaption><span class="role-label">Figure <span class="role-number">A-1</span>. </span>An information design model defining object, event and activity types.</figcaption></figure><p>Notice how functions representing random variables, like the <code>duration</code> function of all activity types, are marked with the keyword (or UML 'stereotype') Â«rvÂ» standing for &quot;random variable&quot;. These random variable functions sample from a probability distribution function (PDF), which is symbolically indicated with expressions like <i>Tri(30,40,50)</i> standing for the <em>triangular</em> PDF with lower and upper bounds 30 and 50 and a median of 40, or <i>DU(1,4)</i> standing for the <em>discrete uniform</em> PDF with lower and upper bounds 3 and 6.</p><p>In the case of the event type <i>OrderCall</i>, the random variable function <em>recurrence</em> samples from an <em>exponential</em> PDF with five different event rates given for the five consecutive hours during which the pizza service operates.</p><p>The activity type <i>TakeOrder</i> is associated with the object type <i>OrderTaker</i> via the implicit resource role <i>orderTaker</i> (with a resource cardinality constraint of &quot;exactly 1&quot;), indicated with the association end stereotype Â«rrÂ» standing for &quot;resource role&quot;. A resource role assigns resource objects to activities. </p><p>Likewise, <i>MakePizza</i> is associated with <i>PizzaMaker</i> and <i>Oven</i> via the (implicitly named) resource roles <i>pizzaMakers</i>, having a resource cardinality constraint of &quot;exactly 2&quot;, and <i>oven</i>, having a resource cardinality constraint of &quot;exactly 1&quot;.</p><p>An <abbr title="Object Event">OE</abbr> class design diagram like the one above, defines resource roles (like <i>pizzaMakers</i>), resource role types (like <i>PizzaMaker</i>) and resource cardinality constraints (like &quot;exactly 2&quot;) for all types of activities. Normally, in an <abbr title="Object Event">OE</abbr> simulation there is a one-to-one correspondence between resource role types and resource pools. By convention, a resource pool has the same name as the corresponding resource role type, yet pluralized and starting with a lowercase character. For instance, the name of the resource pool for <i>PizzaMaker</i> is <i>pizzaMakers</i>.</p><p>Notice that <i>OrderCall</i> events are exogenous, having a recurrence function defined case-wise for each of the five hours per day operation of the pizza service company (in the attached invariant box).</p><p>For implementing the waiting timeout event defined in the process model, the activity type <i>TakeOrder</i> has a class-level <i>waitingTimeout</i> function implementing a random variable with PDF <i>U(3,6)</i>.</p></details><details open="open"><summary>Process Design Model</summary><p>A process design model, in the form of a DPMN process diagram as shown below, is derived from a conceptual process model by abstracting away from items that are not design-relevant and possibly adding certain computational details. </p><p>A <abbr title="Discrete Event Process Modeling Notation">DPMN</abbr> process design model (like the one shown in <a class="role-figure-ref" href="#Make-and-Deliver-Pizza__figMakeAndDeliverPizzaPDM1"><span class="role-label">Figure <span class="role-number">A-2</span></span></a>) essentially defines the admissible sequences of events and activities together with their dependencies and effects on objects, while its underlying <abbr title="Object Event">OE</abbr> class design model (like the one shown in <a class="role-figure-ref" href="#Make-and-Deliver-Pizza__figMakeAndDeliverPizzaIDM"><span class="role-label">Figure <span class="role-number">A-1</span></span></a>) defines the types of objects, events and activities, together with the participation of objects in events and activities, including the resource roles of activities, as well as resource cardinality constraints, parallel participation constraints, alternative resources, and task priorities. </p><figure id="Make-and-Deliver-Pizza__figMakeAndDeliverPizzaPDM1"><img src="tutorial_files/Pizzeria_PDM.svg" width="450" /><figcaption><span class="role-label">Figure <span class="role-number">A-2</span>. </span>A process design for the Make-and-Deliver-Pizza business process</figcaption></figure><p>It is an option, though, to enrich a <abbr title="Discrete Event Process Modeling Notation">DPMN</abbr> process design model by displaying more computational details, especially the recurrence of exogenous events, the duration of activities and the most important resource management features defined in the underlying <abbr title="Object Event">OE</abbr> class design model, such as resource roles (in particular, performer roles can be displayed in the form of <em>Lanes</em>) and resource cardinality constraints. The following model shows an enriched version of <a class="role-figure-ref" href="#Make-and-Deliver-Pizza__figMakeAndDeliverPizzaPDM1"><span class="role-label">Figure <span class="role-number">A-2</span></span></a>:</p><figure id="Make-and-Deliver-Pizza__figMakeAndDeliverPizzaPDM2"><img src="tutorial_files/Pizzeria_PDM2.svg" width="550" /><figcaption><span class="role-label">Figure <span class="role-number">A-3</span>. </span>An enriched process design model</figcaption></figure><p>Such an enriched <abbr title="Discrete Event Process Modeling Notation">DPMN</abbr> process design model includes all computational details needed for an implementation without a separate explicit <abbr title="Object Event">OE</abbr> class design model. In fact, such a process model implicitly defines a corresponding class model. For instance, the enriched <abbr title="Discrete Event Process Modeling Notation">DPMN</abbr> model of <a class="role-figure-ref" href="#Make-and-Deliver-Pizza__figMakeAndDeliverPizzaPDM2"><span class="role-label">Figure <span class="role-number">A-3</span></span></a> implicitly defines the <abbr title="Object Event">OE</abbr> class model of <a class="role-figure-ref" href="#Make-and-Deliver-Pizza__figMakeAndDeliverPizzaIDM"><span class="role-label">Figure <span class="role-number">A-1</span></span></a> above.</p><p>The notation for defining performer roles in <em>Lanes</em> consists of a performer role name (such as <i>pizzaMakers</i>) and and an object type name (such as <i>PizzaMaker</i>) denoting its range, separated by a colon. When the performer role name is appended by a multiplicity expression in brackets, as in <i>pizzaMakers[2]</i>, this denotes a resource cardinality constraint (stating that exactly 2 pizzaMakers are required). When only a performer type prefixed with a colon (such as <i>:OrderTaker</i>) is provided, this means that the implicit performer role name is obtained by lowercasing the performer type name (as in <i>orderTaker:OrderTaker</i>).</p>The notation for defining a non-performer resource role, such as <i>oven:Oven</i>, consists of a named object rectangle, such as the <i>:Oven</i> rectangle in <a class="role-figure-ref" href="#Make-and-Deliver-Pizza__figMakeAndDeliverPizzaPDM2"><span class="role-label">Figure <span class="role-number">A-3</span></span></a>, attached to an activity rectangle by means of a connection line with a small filled square representing a resource link, such as the line between the <i>MakePizza</i> activity rectangle and the <i>:Oven</i> object rectangle in <a class="role-figure-ref" href="#Make-and-Deliver-Pizza__figMakeAndDeliverPizzaPDM2"><span class="role-label">Figure <span class="role-number">A-3</span></span></a>.<p>Notice that the model of <a class="role-figure-ref" href="#Make-and-Deliver-Pizza__figMakeAndDeliverPizzaPDM2"><span class="role-label">Figure <span class="role-number">A-3</span></span></a> does not include any element representing a resource pool. It is assumed that for any organizational position described in the underlying <abbr title="Object Event">OE</abbr> class model, the organization under consideration has a corresponding resource pool. By default, each resource role of an activity type is associated with a resource pool having the same (yet pluralized) name, such that its resource objects are instances of a corresponding resource role type, which is an organizational position in the case of human resources. </p><p>For instance, for the <i>MakePizza</i> activity a pool <i>ovens</i> is assigned to its resource role <i>oven</i> by default. The members of the pool <i>ovens</i> are instances of the (resource) object type <i>Oven</i>. Likewise, a pool <i>pizzaMakers</i> is assigned to the <i>MakePizza</i> resource role <i>pizzaMaker</i>. The members of this pool are instances of the organizational position <i>PizzaMaker</i>. These default pool assignments are normally not shown in a DPMN diagram, but an <abbr title="Object Event">OE</abbr> simulator takes care of them.</p><p>Combined with its underlying <abbr title="Object Event">OE</abbr> class design model, a <abbr title="Discrete Event Process Modeling Notation">DPMN</abbr> process design model provides a computationally complete specification of a simulation model.</p></details></details><details open="open"><summary>Model Variant: Orders May Also Be Taken by Pizza Makers</summary><p>For decreasing the number of lost orders due to long waiting times, it is advisable to charge pizza makers with taking orders whenever no order taker is available. In resource management terminology, the organizational position <i>pizza maker</i> is redefined by adding the performer role <i>order taker</i> to its portfolio of organizational roles. </p><p>In a conceptual <abbr title="Object Event">OE</abbr> class diagram, this can be expressed by adding a subtyping arrow from <i>pizza makers</i> to <i>order takers</i> categorized as an <em><b>alternative resource subtyping</b></em> arrow with the stereotype Â«arÂ», as shown in the following diagram:</p><figure><img alt="conceptual information model describing object, event and activity types" src="tutorial_files/Pizzeria-AlternativeResourceSubtyping_IDM.svg" width="450" /></figure><p>The <abbr title="Object Event">OE</abbr> class design diagram is extended in the same way, by adding an <em>alternative resource subtyping</em> arrow from <i>PizzaMaker</i> to <i>OrderTaker</i>.</p><p>The DPMN process design model is not affected by this change.</p></details><section class="role-section2" id="Make-and-Deliver-Pizza-OESjs"><h3 class="role-section2-title"><span class="role-label">Section <span class="role-number">A.1.1</span>. </span>Implementation with OESjs</h3><p>The JavaScript-based simulator OESjs-Core2 implements the <em>Object Event Simulation (OES)</em> paradigm, and, consequently, allows a straight-forward coding of <abbr title="Object Event">OE</abbr> class models and <abbr title="Discrete Event Process Modeling Notation">DPMN</abbr> process models.</p><details open="open"><summary><h4>Implementing the Information Design Model</h4></summary><p>For implementing the <abbr title="Object Event">OE</abbr> class design model with OESjs-Core2, we have to code all object types, event types and activity types specified in the model in the form of JavaScript classes extending the respective OESjs framework classes oBJECT, eVENT and aCTIVITY. We start with the object type <i>OrderTaker</i> shown in the following diagram:</p><figure class="right"><img alt="???" src="tutorial_files/Pizzeria-OrderTaker_IDM.svg" width="150" /></figure><p>The <code>OrderTaker</code> object class can be coded in the following way:</p><pre>class <b>OrderTaker</b> extends oBJECT {
  constructor({ id, name, status}) {
    super( id, name);
    this.status = status;
  }
}</pre><p>All object classes inherit an <code>id</code> attribute and a <code>name</code> attribute from the pre-defined <abbr title="Object Event Simulation">OES</abbr> foundation class <code>oBJECT</code>. Since order takers are resource objects, we need to define a <code>status</code> property having the pre-defined enumeration data type <code>ResourceStatusEL</code> as its range. </p><p>The other object classes (<i>PizzaMaker</i>, <i>Oven</i> and <i>Scooter</i>) are coded in the same way.</p><p>We next show how to code the event type <i>OrderCall</i> depicted in the following diagram:</p><figure class="right"><img alt="???" src="tutorial_files/Pizzeria-OrderCall_IDM.svg" width="220" /></figure><p>The <code>OrderCall</code> event class is coded in the following way:</p><pre>class <b>OrderCall</b> extends eVENT {
  constructor({ occTime, delay}) {
    super({occTime, delay});
  }
  <b>createNextEvent</b>() {
    return new OrderCall({delay: OrderCall.recurrence()});
  }
  static <b>recurrence</b>() {
    var hour = Math.floor(sim.time / 60);
    return rand.exponential( OrderCall.arrivalRates[hour]);
  }
}
// arrival rates per minute (for a daily operation for 5 hours)
OrderCall.<b>arrivalRates</b> = [1/6, 1/0.66, 1/1.5, 1/6, 1/12];</pre><p>All event classes inherit an <code>occTime</code> attribute and a <code>delay</code> attribute from the pre-defined <abbr title="Object Event Simulation">OES</abbr> foundation class <code>eVENT</code>. Any event in <abbr title="Object Event Simulation">OES</abbr> can be created either with a value for the attribute <code>occTime</code> (standing for <em>occurrence time</em>) or with a value for the attribute <code>delay</code>. In the latter case, the event's occurrence time is automatically derived by adding the value of <code>delay</code> to the current simulation time. </p><p>Notice how the time-varying recurrence rates (representing order arrival rates) are implemented in the <code>recurrence</code> function: by first computing the current hour, which is then used as an index for accessing the corresponding element of the <code>OrderCall.arrivalRates</code> array.</p><p>Finally, we show how to code the activity type <i>TakeOrder</i> depicted in the following diagram:</p><figure class="right"><img alt="???" src="tutorial_files/Pizzeria-TakeOrder_IDM.svg" width="400" /></figure><p>The <i>TakeOrder</i> activity class is coded in the following way:</p><pre>class <b>TakeOrder</b> extends aCTIVITY {
  constructor({id, startTime, duration}={}) {
    super({id, startTime, duration});
  }
  static <b>duration</b>() {
    return rand.uniform( 1, 4);
  }
  static <b>waitingTimeout</b>() {
    return rand.uniformInt( 3, 6);
  }
}
TakeOrder.<b>resourceRoles</b> = {
  &quot;orderTaker&quot;: {range: OrderTaker}
}</pre><p>All activity classes inherit the attributes <code>id</code>, <code>startTime</code> and <code>duration</code> from the pre-defined <abbr title="Object Event Simulation">OES</abbr> foundation class <code>aCTIVITY</code>. When an activity is created as a JS object during a simulation run, the value of its <code>duration</code> property is obtained by invoking the <code>duration()</code> function defined as a class-level (&quot;static&quot;) function for its activity class. These activity duration functions typically implement a random variable by invoking a random variate sampling function, such as <code>rand.triangular(30,50,40)</code>, which samples from the triangular probability distribution function (with min/max=30/50 and mode=40).</p><p>Notice how the resource role association between <i>TakeOrder</i> and <i>OrderTaker</i>, which defines the resource reference property <i>TakeOrder::orderTaker</i>, is coded by a corresponding entry in the map-valued class-level property <code>resourceRoles</code>.</p></details><details open="open"><summary><h4>Implementing the Process Design Model</h4></summary><p>The following process design model specifies six types of events: order call events, take order waiting timeouts, lost order events, take order activities, make pizza activities, and deliver pizza activities:</p><figure><img alt="???" src="tutorial_files/Pizzeria_PDM.svg" width="450" /></figure><p>A DPMN process design model can be decomposed into a set of event rule design models, one for each type of event specified in the design model. Since the <code>LostOrder</code> event and the <code>DeliverPizza</code> activity do not have any effects, we only need four event rules. </p><h5>1 The <code>OrderCall</code> event rule</h5><p>Starting with the following <code>OrderCall</code> event rule design model, we show how the event rules specified by each of these event rule design models can be coded.</p><figure><img alt="???" src="tutorial_files/Pizzeria-OrderCall_RDM.svg" width="200" /></figure><p>The <code>OrderCall</code> event rule does not define any state changes of affected objects, but only the resource-dependent scheduling of a <code>TakeOrder</code> activity, which is coded with the following OESjs statement: </p><pre>OrderCall.<b>successorActivity</b> = &quot;TakeOrder&quot;;</pre><h5>2 The <code>TakeOrder</code> Waiting Timeout event rule</h5><figure><img alt="???" src="tutorial_files/Pizzeria-TakeOrder-WaitingTimeOut_RDM.svg" width="100" /></figure><p>The <code>TakeOrder</code> Waiting Timeout event rule only schedules the immediate occurrence of a <code>LostOrder</code> event, which is coded with the following OESjs event routine within the <code>TakeOrder</code> activity class:</p><pre><b>onWaitingTimeout</b>() {
  var followupEvents=[];
  followupEvents.push( new LostOrder());
  return followupEvents;
}</pre><h5>3 The <code>TakeOrder</code> event rule</h5><p>Since activities are composite events, we also have event rules for them. These rules are triggered when an activity completes, that is, by the corresponding activity end events.</p><figure><img alt="???" src="tutorial_files/Pizzeria-TakeOrder_RDM.svg" width="230" /></figure><p>The <code>TakeOrder</code> event rule only takes care of the resource-dependent scheduling of a <code>MakePizza</code> activity, which is coded with the following OESjs statement:</p><pre>TakeOrder.<b>successorActivity</b> = &quot;MakePizza&quot;;</pre><h5>4 The <code>MakePizza</code> event rule</h5><figure><img alt="???" src="tutorial_files/Pizzeria-MakePizza_RDM.svg" width="230" /></figure><p>The <code>MakePizza</code> event rule only takes care of the resource-dependent scheduling of a <code>DeliverPizza</code> activity, which is coded with the following OESjs statement:</p><pre>MakePizza.<b>successorActivity</b> = &quot;DeliverPizza&quot;;</pre><blockquote class="role-attention"><p>You can <a href="https://gwagner57.github.io/oes/js/Core2/Make-and-Deliver-Pizza-AN-1/">run this model</a> from the OES GitHub website, or inspect its <a href="https://github.com/gwagner57/oes/tree/master/JavaScript/Core2/Make-and-Deliver-Pizza-1">OESjs code</a>.</p></blockquote></details></section></section><section class="role-section1" id="Load-Haul-Dump"><h2 class="role-section1-title"><span class="role-label">Section <span class="role-number">A.2</span>. </span>Load-Haul-Dump</h2><figure style="float:right"><div><img alt="???" src="tutorial_files/Load-Truck-Scenario.svg" width="600" /></div><small>Image by <a href="https://pixabay.com/users/clker-free-vector-images-3736/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=306852" id="Load-Haul-Dump__a2">Clker-Free-Vector-Images</a></small></figure><p>A haul service company accepts requests for hauling large quantities of earth from a loading site to a dump site, using dump trucks and wheel loaders.</p><p>You can <a href="https://gwagner57.github.io/oes/js/Core2/Load-Haul-Dump-1/">run this model</a> from the OES GitHub website, or inspect its <a href="https://github.com/gwagner57/oes/tree/master/JavaScript/Core2/Load-Haul-Dump-1">OESjs code</a>.</p><blockquote class="role-note"><p>Our <em>Load-Haul-Dump</em> modeling problem is based on the chapter &quot;Example Model 2: Earthmoving operation&quot; in the book <a href="https://www.anylogic.com/resources/books/the-art-of-process-centric-modeling-with-anylogic/">The Art of Process-Centric Modeling with AnyLogic</a> by Arash Mahdavi.</p></blockquote><details open="open"><summary>Conceptual Model</summary><p>A haul service company has resource pools for dump trucks and wheel loaders. While the activities <em>go (back) to loading site</em>, <em>haul</em>, <em>dump</em> and <em>go home</em> just require a <em>truck</em> (or a <em>wheel loader</em>) as a resource, <em>load</em> activities require both a <em>truck</em> and a <em>wheel loader</em>.</p><details open="open"><summary>Conceptual Information Model</summary><p>The potentially relevant object types are:</p><ol><li>haul service company,</li><li>wheel loaders,</li><li>dump trucks.</li></ol><p>Potentially relevant types of events and activities are:</p><ol><li>haul requests coming in from customers,</li><li>going to the loading site (an activity performed by trucks and by wheel loaders),</li><li>loading (performed by wheel loaders using trucks as resources),</li><li>hauling (performed by trucks),</li><li>dumping (performed by trucks),</li><li>going back to loading site (performed by trucks),</li><li>going home when the job is done (performed by trucks and by wheel loaders).</li></ol><p>Both object types and event types, together with their participation associations, can be visually described in a conceptual information model in the form of a special kind of UML class diagram, called Object Event (<abbr title="Object Event">OE</abbr>) class diagram, as shown below.</p><figure id="Load-Haul-Dump__lof__4"><figcaption><span class="role-label">Figure <span class="role-number">A-4</span>. </span>A conceptual <abbr title="Object Event">OE</abbr> class model describing object, event and activity types.</figcaption><img alt="???" src="tutorial_files/LoadHaulDump_CIM.svg" width="450" /></figure><p>Notice that the association end annotations Â«rrÂ» and Â«rpÂ» denote <em>resource roles</em> and <em>resource pools</em>. A haul service company has resource pools for trucks and wheel loaders. The activity types <em>haul</em>, <em>dump</em> and <em>go back to loading site</em> have a resource role <em>truck</em> for assigning a truck to any activity of one of those types. The activity types <em>go to loading site</em> and <em>go home</em> have either a a resource role <em>truck</em> or a resource role <em>wheel loader</em>, as indicated by the <em>alternative association</em> constraint expressed with a dashed line annotated with <em>{xor}</em>. The activity type <em>load</em> has both resource role <em>truck</em> and a resource role <em>wheel loaders</em> for assigning at least one and at most two wheel loaders to any <em>load</em> activity (as indicated by the multiplicity &quot;1..2&quot; at the Â«rrÂ» association end at the class <em>wheel loaders</em>).</p></details><details open="open"><summary>Conceptual Process Model</summary><p>The involved types of events and activities can be related with each other via <em>resource-dependent activity start arrows</em> and <em>event scheduling arrows</em>, as shown in the following DPMN process diagram:</p><figure><img alt="A DPMN diagram showing a conceptual process model" src="tutorial_files/LoadHaulDump_CPMa.svg" width="600" /></figure><p>Notice that there are three types of arrows in this DPMN diagram:</p><ol><li><strong><em>Event Scheduling</em></strong> arrows, like the one between <em>load</em> and <em>haul</em>, have the meaning that the succeeding activity is started as soon as the preceding activity has been completed (there is no need for enqueuing a planned activity, since all resources required by the succeeding activity are provided by the preceding activity). Event Scheduling arrows are not part of BPMN, rather they have been proposed by Schruben (1983) for <a href="https://dl.acm.org/citation.cfm?id=358460" rel="nofollow noopener" target="_blank">Event Graphs</a>.</li><li>A <strong><em>Multiple Events Scheduling</em></strong> arrow, like the one between <em>requests</em> and <em>go to loading site</em>, means that one instance of the preceding event type triggers multiple instances of the succeeding event type. In our example model, this means that one <em>request</em> event is followed by multiple <em>go to loading site</em> activities, one for each truck and each wheel loader assigned to the job.</li><li>A <strong><em>Resource-Dependent Activity Start</em></strong> arrow, like the one between <em>go to loading site</em> and <em>load</em> activities, means that as soon as an activity of the preceding activity type has been completed, a new planned activity is added to the queue of planned activities of the succeeding type (and started as soon as all required resources are available).</li></ol><p>The model shows that when a haul request comes in, the haul service company deploys multiple trucks and wheel loaders to the loading site, each of them performing a <em>go to loading site</em> activity, as indicated by the double arrow between the <i>haul requests</i> event circle and the <em>go to loading site</em> activity rectangle. Each of these activities leads to enqueuing a new planned <em>load</em> activity, as indicated by the <em>resource-dependent activity start arrow</em> from the <em>go to loading site</em> activity shape to the <em>load</em> activity shape. Such an enqueued (planned) activity is going to be dequeued and started as soon as the required resources become available. This means that as soon as a wheel loader is available, the next <em>load</em> activity is going to be started. When a <em>load</em> activity is completed, a <em>haul</em> activity and then a <em>dump</em> activity are going to start immediately, as indicated by the <em>event scheduling arrows</em> between them.</p><p>A more complete model prevents trucks to go back to the loading site and perform a load activity even when the job has been completed during the go back activity (resulting in haul and dump activities with an empty truck). For avoiding this uneconomic behavior, a second decision if the job has been done needs to be taken after the go back activity. In addition, the model has to describe that wheel loaders also go home when their job has been done. This is shown in the following refined model:</p><figure id="Load-Haul-Dump__lof__5"><img alt="???" src="tutorial_files/LoadHaulDump_CPMb.svg" width="650" /><figcaption><span class="role-label">Figure <span class="role-number">A-5</span>. </span>A refined conceptual process model.</figcaption></figure></details></details><details open="open"><summary>Simulation Design</summary><p>In our simulation design, we consider only one particular haul service company, which does not have to be modeled as an explicit object. Also, we abstract away from the fact that also wheel loaders have to go to, and return from, the loading site by assuming that they are already at the site when the dump trucks arrive.</p><details open="open"><summary>Information Design Model</summary> <p>In the information design model, we need to define a <i>status</i> attribute for all resource object types, such as <i>Truck</i> and <i>WheelLoader</i>, and a duration function, typically representing a random variable, for each activity type:</p><figure id="Load-Haul-Dump__lof__6"><figcaption id="Load-Haul-Dump__figLoadHaulDumpIDM"><span class="role-label">Figure <span class="role-number">A-6</span>. </span>An information design model for the Load-Haul-Dump system.</figcaption><img alt="???" src="tutorial_files/LoadHaulDump_IDM.svg" width="500" /></figure><p>Notice how functions representing random variables, like the <code>duration</code> function of all activity types, are marked with the keyword (or UML 'stereotype') Â«rvÂ» standing for &quot;random variable&quot;. These random variable functions sample from a probability distribution function (PDF), which is symbolically indicated with expressions like Tri(30,50,40) standing for the triangular PDF with lower and upper bounds 30 and 50, and a median of 40. </p><p>Each activity type is associated with <i>Truck</i> or <i>WheelLoader</i> as their resource role(s), indicated with the association end stereotype Â«rrÂ» standing for &quot;resource role&quot;.</p></details><details open="open"><summary>Process Design Model</summary><p>A process design model, in the form of a DPMN process diagram as shown below, is derived from a conceptual process model by</p><ol><li>Abstracting away from items that are not design-relevant.</li><li>Defining event variables, if needed.</li><li>Defining object variables in the form of Data Object boxes for specifying state changes of objects affected by events.</li><li>Formalizing decision conditions on the basis of event and object variables.</li></ol><figure id="Load-Haul-Dump__lof__7"><figcaption><span class="role-label">Figure <span class="role-number">A-7</span>. </span>A computationally complete process design for the Load-Haul-Dump business process.</figcaption><img alt="???" src="tutorial_files/LoadHaulDump_PDM.svg" width="650" /></figure></details></details><section class="role-section2" id="Load-Haul-Dump-OESjs"><h3 class="role-section2-title"><span class="role-label">Section <span class="role-number">A.2.1</span>. </span>Implementation with OESjs</h3><p>The JavaScript-based simulator OESjs implements the Object Event Simulation paradigm, and, consequently, allows a straight-forward coding of <abbr title="Object Event">OE</abbr> class models and DPMN process models.</p><details open="open"><summary>Implementing the Information Design Model</summary><p>For implementing the <abbr title="Object Event">OE</abbr> class design model with OESjs, we have to code all object types, event types and activity types specified in the model in the form of JavaScript classes.</p><figure class="right"><img alt="???" src="tutorial_files/LoadHaulDump-Truck_IDM.svg" width="250" /></figure><p>The <code>Truck</code> object class can be coded with OESjs-Core2 in the following way:</p><pre>class <b>Truck</b> extends oBJECT {
  constructor({ id, name, <b>status</b>}) {
    super( id, name);  // invoke the oBJECT constructor
    <b>this.status</b> = status;
  }
}
// a class-level attribute
Truck.<b>capacity</b> = 15;  // m3</pre><p>All object classes inherit an <code>id</code> attribute and a <code>name</code> attribute from the pre-defined OES foundation class <code>oBJECT</code>. Since trucks are resource objects, we need to define a <code>status</code> property for them. We also define a class-level attribute <code>capacity</code> for modeling their load capacity, assuming that all trucks have the same capacity.</p><p>The <i>WheelLoader</i> object class is coded in the same way as <i>Truck</i>.</p><figure class="right"><img alt="???" src="tutorial_files/LoadHaulDump-HaulRequest_IDM.svg" width="150" /></figure><p>The <code>HaulRequest</code> event class can be coded in the following way:</p><pre>class <b>HaulRequest</b> extends eVENT {
  constructor({ occTime, delay, <b>quantity</b>}) {
    super({occTime, delay});
    <b>this.quantity</b> = quantity;
  }
  onEvent() {
    ...
  }
}</pre><p>All event classes inherit an <code>occTime</code> attribute and a <code>delay</code> attribute from the pre-defined OES foundation class <code>eVENT</code>. Any event in OES can be created either with a value for the attribute <code>occTime</code> (standing for <em>occurrence time</em>) or with a value for the attribute <code>delay</code>. In the latter case, the event's occurrence time is automatically derived by adding the value of <code>delay</code> to the current simulation time. In addition, the <i>HaulRequest</i> event class has a property <code>quantity</code> for specifying the quantity to be hauled.</p><p>The <code>onEvent</code> method of the <i>HaulRequest</i> event class is not part of the information design model. Rather, it is implementing an event rule specified in the process design model. Consequently, it will be discussed below.</p><figure class="right"><img alt="???" src="tutorial_files/LoadHaulDump-GoToLoadingSite_IDM.svg" width="400" /></figure><p>The <i>GoToLoadingSite</i> activity class can be coded in the following way:</p><pre>class <b>GoToLoadingSite</b> extends aCTIVITY {
  constructor({id, startTime, duration}={}) {
    super({id, startTime, duration});
  }
  static <b>duration</b>() {return rand.triangular( 30, 50, 40);}
}
GoToLoadingSite.<b>resourceRoles</b> = {
  &quot;truck&quot;: {range: Truck}
}</pre><p>All activity classes inherit the attributes <code>id</code>, <code>startTime</code> and <code>duration</code> from the pre-defined OES foundation class <code>aCTIVITY</code>. When an activity is created as a JS object during a simulation run, the value of its <code>duration</code> property is obtained by invoking the <code>duration()</code> function defined as a class-level (&quot;static&quot;) function for its activity class. These activity duration functions typically implement a random variable by invoking a random variate sampling function, such as <code>rand.triangular(30,50,40)</code>, which samples from the triangular probability distribution function (with min/max=30/50 and mode=40).</p><p>Notice how the resource role association between <i>GoToLoadingSite</i> and <i>Truck</i>, which defines the resource reference property <i>GoToLoadingSite::truck</i>, is coded by a corresponding entry in the map-valued class-level property <code>resourceRoles</code>.</p></details><details open="open"><summary>Implementing the Process Design Model</summary><p>A DPMN process design model can be decomposed into a set of event rule design models, one for each type of event specified in the design model. Starting with the <code>HaulRequest</code> event rule design model, we show how the event rules specified by each of these event rule design models can be coded in the form of an <code>onEvent</code> method.</p><figure id="Load-Haul-Dump-OESjs__lof__8"><figcaption><span class="role-label">Figure <span class="role-number">A-8</span>. </span>A design model for the <code>HaulRequest</code> event rule.</figcaption><img alt="???" src="tutorial_files/LoadHaulDump-HaulRequest_RDM.svg" width="300" /></figure><p>In the following <code>HaulRequest</code> event rule method <code>onEvent</code>, all available trucks are allocated to the current haul request, and, after computing the number of loads, for each of the allocated trucks a new <code>GoToLoadingSite</code> activity is started:</p><pre>class <b>HaulRequest</b> extends eVENT {
  ...
  <b>onEvent</b>() {
    const followupEvents=[],
          allocatedTrucks = sim.resourcePools[&quot;trucks&quot;].<b>allocateAll</b>();
    // assign model variable
    sim.model.v.<b>nmrOfLoads</b> = Math.ceil( this.quantity / Truck.capacity);
    for (const t of allocatedTrucks) {
      const goActy = <b>new GoToLoadingSite</b>();
      // assign truck as required resource
      goActy.truck = t;
      // start GoToLoadingSite activity
      followupEvents.push( <b>new aCTIVITYsTART</b>({plannedActivity: goActy}));
    }
    return followupEvents;
  }
}</pre><p>Since activities are composite events, we also have event rules for them. The following <i>GoToLoadingSite</i> event rule is triggered whenever a <i>GoToLoadingSite</i> activity is completed, since the completion of an activity counts as its occurrence event.</p><figure id="Load-Haul-Dump-OESjs__lof__9"><figcaption><span class="role-label">Figure <span class="role-number">A-9</span>. </span>A design model for the <code>GoToLoadingSite</code> event rule.</figcaption><img alt="???" src="tutorial_files/LoadHaulDump-GoToLoadingSite_RDM.svg" width="250" /></figure><p>This rule states that whenever a <i>GoToLoadingSite</i> activity ends (or is completed), then a new planned <i>Load</i> activity is enqueued, if no wheel loader is available, or, otherwise, a new <i>Load</i> activity is started. In OESjs, it is coded in the following declarative way: </p><pre>GoToLoadingSite.<b>successorActivity</b> = &quot;Load&quot;</pre><p>Such a successor activity assignment allows the simulator to check if the required resources are available and then start the successor activity, or, otherwise, enqueue a new planned successor activity.</p><figure id="Load-Haul-Dump-OESjs__lof__10"><figcaption><span class="role-label">Figure <span class="role-number">A-10</span>. </span>A design model for the <code>Load</code> event rule.</figcaption><img alt="???" src="tutorial_files/LoadHaulDump-Load_RDM.svg" width="250" /></figure><p>This rule states that whenever a <i>Load</i> activity ends, the model variable <i>nmrOfLoads</i> is decremented by 1, and a <i>Haul</i> activity is immediately started (as a successor activity). Since the <i>Haul</i> activity doesn't require any additional resources, there is no need to enqueue a planned activity and wait for the availability of resources. In OESjs, this rule is coded in the following way:</p><pre>class <b>Load</b> extends aCTIVITY {
  ...
  <b>onActivityEnd</b>() {
    const followupEvents = [];
    // decrement nmrOfLoads counter
    sim.model.v.nmrOfLoads--;
    return followupEvents;
  }
  ...
}
Load.<b>successorActivity</b> = &quot;Haul&quot;;</pre><p>Notice that the state change expressed in the <i>modelVariables</i> object rectangle, the decrementation of <i>nmrOfLoads</i>, is taken care of in the <code>onActivityEnd</code> method of the <code>Load</code> activity class. Instead of explicitly scheduling the start of the succeeding <code>Haul</code> activity in that method, we simply define <code>Haul</code> to be the successor activity of <code>Load</code>.</p><figure id="Load-Haul-Dump-OESjs__lof__11"><figcaption><span class="role-label">Figure <span class="role-number">A-11</span>. </span>A design model for the <code>Haul</code> event rule.</figcaption><img alt="???" src="tutorial_files/LoadHaulDump-Haul_RDM.svg" width="200" /></figure><p>The <i>Haul</i> event rule states that whenever a <i>Haul</i> activity ends, it is immediately succeeded by a <i>Dump</i> activity. It is coded in the following way:</p><pre>Haul.<b>successorActivity</b> = &quot;Dump&quot;;</pre><figure id="Load-Haul-Dump-OESjs__lof__12"><figcaption><span class="role-label">Figure <span class="role-number">A-12</span>. </span>A design model for the <code>Dump</code> event rule.</figcaption><img alt="???" src="tutorial_files/LoadHaulDump-Dump_RDM.svg" width="300" /></figure><p>The <i>Dump</i> event rule states that when a <i>Dump</i> activity ends and the model variable <i>nmrOfLoads</i> has the value 0, it is immediately succeeded by a <i>GoHome</i> activity, otherwise it is immediately succeeded by a <i>GoBackToLoadingSite</i> activity. The rule is coded by defining the successor activity as a function returning either &quot;GoBackToLoadingSite&quot; or &quot;GoHome&quot; in the following way:</p><pre>Dump.<b>successorActivity</b> = function () {
  return sim.model.v.nmrOfLoads === 0 ? &quot;GoHome&quot;:&quot;GoBackToLoadingSite&quot;;
}</pre><figure id="Load-Haul-Dump-OESjs__lof__13"><figcaption><span class="role-label">Figure <span class="role-number">A-13</span>. </span>A design model for the <code>GoBackToLoadingSite</code> event rule.</figcaption><img alt="???" src="tutorial_files/LoadHaulDump-GoBackToLoadingSite_RDM.svg" width="300" /></figure><p>The <i>GoBackToLoadingSite</i> event rule states that when a <i>GoBackToLoadingSite</i> activity ends and the model variable <i>nmrOfLoads</i> still has a value greater than 0, a new planned <i>Load</i> activity is enqueued; otherwise a <i>GoHome</i> activity is immediately started. The rule is coded by defining the successor activity of <i>GoBackToLoadingSite</i> as a function returning either &quot;Load&quot; or &quot;GoHome&quot; in the following way:</p><pre>GoBackToLoadingSite.<b>successorActivity</b> = function () {
  return sim.model.v.nmrOfLoads &gt; 0 ? &quot;Load&quot;:&quot;GoHome&quot;;
}</pre></details></section></section></section><section class="role-appendix" id="architecture"><h1 class="role-appendix-title"><span class="role-label">Appendix <span class="role-number">B</span>. </span>Simulator Architecture</h1><p>OES Core 2 adds the following features to OES Core 1:</p><ul><li>activities as composite events, having a start event and an end event, and a duration as the time in-between their start and end events</li><li>resource roles with resource cardinality constraints</li><li>resource pools (supported in two forms: count pools and individual pools)</li><li>automated (a) throughput, (b) queue length, (c) waiting time, (d) cycle/throughput time, and (e) resource utilization statistics per activity type</li></ul><p>The OES Core 2 simulator's information architecture is described by the following class diagram:</p><figure><img src="tutorial_files/OES-Core2.svg" /></figure></section><div class="role-backmatter" id="backmatter"><section class="role-index" id="_index"><h1 class="role-index-title">Index</h1><nav class="role-index-toc" id="__I_TOC"><span class="role-index-toc-placeholder">A</span> <span class="role-index-toc-placeholder">B</span> <span class="role-index-toc-placeholder">C</span> <span class="role-index-toc-placeholder">D</span> <a class="role-index-div-ref" href="#__I_TOC_E">E</a> <span class="role-index-toc-placeholder">F</span> <span class="role-index-toc-placeholder">G</span> <span class="role-index-toc-placeholder">H</span> <span class="role-index-toc-placeholder">I</span> <span class="role-index-toc-placeholder">J</span> <span class="role-index-toc-placeholder">K</span> <span class="role-index-toc-placeholder">L</span> <span class="role-index-toc-placeholder">M</span> <span class="role-index-toc-placeholder">N</span> <span class="role-index-toc-placeholder">O</span> <span class="role-index-toc-placeholder">P</span> <span class="role-index-toc-placeholder">Q</span> <a class="role-index-div-ref" href="#__I_TOC_R">R</a> <span class="role-index-toc-placeholder">S</span> <span class="role-index-toc-placeholder">T</span> <span class="role-index-toc-placeholder">U</span> <span class="role-index-toc-placeholder">V</span> <span class="role-index-toc-placeholder">W</span> <span class="role-index-toc-placeholder">X</span> <span class="role-index-toc-placeholder">Y</span> <span class="role-index-toc-placeholder">Z</span></nav><div class="role-index-div" id="__I_TOC_E"><h2 class="role-index-div-title">E<a class="role-index-toc-ref" href="#__I_TOC" title="Back to the top of this page"></a></h2><ul class="role-index-entries"><li class="role-index-entry" id="__I1"><span class="role-index-term">exogenous event</span>, <span class="role-index-anchor-refs"><a class="role-index-anchor-ref" href="#DesM__I__1">1</a></span></li></ul></div><div class="role-index-div" id="__I_TOC_R"><h2 class="role-index-div-title">R<a class="role-index-toc-ref" href="#__I_TOC" title="Back to the top of this page"></a></h2><ul class="role-index-entries"><li class="role-index-entry" id="__I3"><span class="role-index-term">random variable</span>, <span class="role-index-anchor-refs"><a class="role-index-anchor-ref" href="#DesM__I__3">1</a></span></li><li class="role-index-entry" id="__I2"><span class="role-index-term">recurrence</span>, <span class="role-index-anchor-refs"><a class="role-index-anchor-ref" href="#DesM__I__2">1</a></span></li></ul></div></section></div></section><div class="role-footnotes"><hr class="role-footnote-separator" /><div class="role-footnote" id="__FN1"><a class="role-footnote-number" href="#__FNR1">[1]</a> Such a resource role assignment is expressed in the UML class diagram as a link instantiating the corresponding class-level meta-property <i>ActivityType.resourceRole</i>.</div></div></body></html>