<!DOCTYPE html>
<html lang="en-US" xml:lang="en-US" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="UTF-8" />
    <title>Four-Stage-Supply-Chain-1 Simulation Model Description</title>
    <meta content="width=device-width, initial-scale = 1.0" name="viewport" />
    <meta content="en" http-equiv="Content-Language" />
    <meta content="A simulation of a four stage supply chain consisting of a retailer, a wholesaler,
      a distributor and a factory." name="description" />
    <link href="../description.css" rel="stylesheet" />
  </head>
  <body>
  <div id="frontMatter"><h1><span>Four-Stage-Supply-Chain-1 Model Description</span> <a href="index.html">Back to simulation</a></h1>
  
  <p id="copyright">Â© 2022 (<a href="https://creativecommons.org/licenses/by/4.0/">CC BY</a>) Gerd Wagner,
  Brandenburg University of Technology, Germany.</p> 
  <!--<figure class="right"><img alt="" src="" width="400" /></figure>-->

  <p>The four stage (single-product) supply chain of the classical "Beer Game" consists of
      a retailer, a wholesaler, a distributor and a factory.</p>
  
  <p>You can inspect the model's <a href="https://github.com/gwagner57/oes/tree/master/JavaScript/Core4/Four-Stage-Supply-Chain-1">OESjs
      code</a> on the OES GitHub repo.</p>
  </div>

  <details><summary>Conceptual Model</summary>
    <p style="font-size: smaller">A <dfn>conceptual model</dfn>, also called <em>domain model</em>, describes the real-world
     <em>system under investigation</em> by identifying the relevant types of objects and events,
     and describing their dynamics, allowing to understand what's going on in the real system. It does not
     describe any software/design artifact.</p>

  <details><summary>Conceptual Information Model</summary>
   <div style="font-size: smaller">
    <p>A <dfn>conceptual information model</dfn> describes the subject matter vocabulary used, e.g.,
     in the system narrative, in a semi-formal way. Such a vocabulary essentially consists of names for</p>
    <ul>
     <li><strong>types</strong>, corresponding to <em>classes</em> in OO modeling, or <em>unary predicates</em>
      in formal logic,</li>
     <li><strong>properties</strong> corresponding to <em>binary predicates</em> in formal logic,</li>
     <li><strong>associations</strong> corresponding to <em>n-ary predicates</em> (with <em>n</em> > 1) in formal logic.</li>
    </ul>
    <p>The main categories of types are <em>object types</em> and <em>event types</em>. A simple form of conceptual
     information model is obtained by providing a list of each of them, while a more elaborated model, preferably
     in the form of a UML class diagram, also defines properties and associations, including the <strong>participation</strong>
     of objects (of certain types) in events (of certain types).</p>
   </div>
  <p>The potentially relevant object types are:</p>
  <ol>
      <li>top supply chain nodes (like the factory)</li>
      <li>intermediate supply chain nodes (like the wholesaler and distributor)</li>
      <li>bottom supply chain nodes (like the retailer)</li>
  </ol>
  <p>Potentially relevant types of events are:</p>
   <ol>
    <li>receive order (from the downstream node or from end customer),</li>
    <li>end of week,</li>
    <li>send order (to the upstream node),</li>
    <li>ship items (to the downstream node),</li>
    <li>perceive reception of items (receive delivery).</li>
   </ol>
  <p>Both object types and event types, together with their
  participation associations, can be visually described in a conceptual
  information model in the form of a UML class diagram, as shown
  below.</p>
<!--
  <figure><figcaption>A conceptual information model describing
  object, event and activity types.</figcaption><img alt="???"
  src="img/CIM.svg" width="700" /></figure>
-->
  </details>
  
  <details><summary>Conceptual Process Model</summary>
  <p></p>
<!--
        <figure><img alt="A DPMN diagram showing a conceptual process model" src="img/CPM.svg"
        width="600" /></figure>
-->
        </details>
       </details>

       <details><summary>Simulation Design</summary>

        <details><summary>Information Design Model</summary>

         <figure><figcaption>An information design model defining object,
        event and activity types.</figcaption><img alt="???" src="img/IDM.svg"
        width="600" /></figure>

         </details>
         <details><summary>Process Design Model</summary>
<!--
          <figure><figcaption>A computationally complete
        process design for the Load-Haul-Dump business process.</figcaption>
           <img alt="???" src="img/PDM.svg" width="700" /></figure>
-->
         </details>
        </details>

        <details><summary>Implementation with OESjs</summary>

         <details><summary>Implementing the Information Design Model</summary>

         <p>For implementing the information design model, we have to
        code all object types and event types specified in the model
        in the form of classes.</p>
<!--
        <figure class="right"><img alt="???" src="img/Truck_IDM.svg" width="300" /></figure>
-->
        <p>The <code>Truck</code> object class can be coded with OESjs-Core2 in the following way:</p>

        <pre>class <b>Truck</b> extends oBJECT {
        constructor({ id, name, <b>status</b>}) {
          super( id, name);  // invoke the oBJECT constructor
          <b>this.status</b> = status;
        }
      }
      // a class-level attribute
      Truck.<b>capacity</b> = 15;  // m3</pre>

        <p>All object classes inherit an <code>id</code> attribute and a <code>name</code> attribute from the
        pre-defined OES foundation class <code>oBJECT</code>.</p>

        <p>The <i>WheelLoader</i> object class is coded in the same way as <i>Truck</i>.</p>
<!--
        <figure class="right"><img alt="HaulRequest event class" src="img/HaulRequest_IDM.svg" width="180" /></figure>
-->
        <p>The <code>HaulRequest</code> event class can be coded in the following way:</p>

        <pre>class <b>HaulRequest</b> extends eVENT {
        constructor({ occTime, delay, <b>quantity</b>}) {
          super({occTime, delay});
          <b>this.quantity</b> = quantity;
        }
        onEvent() {
          ...
        }
      }</pre>

        <p>All event classes inherit an <code>occTime</code> attribute and a
        <code>delay</code> attribute from the pre-defined OES foundation class
        <code>eVENT</code>. Any event in OES can be created either with a value for
        the attribute <code>occTime</code> (standing for <em>occurrence time</em>)
        or with a value for the attribute <code>delay</code>. In the latter case,
        the event's occurrence time is automatically derived by adding the value of
        <code>delay</code> to the current simulation time. In addition, the
        <i>HaulRequest</i> event class has a property <code>quantity</code> for
        specifying the quantity to be hauled.. </p><p>The <code>onEvent</code>
        method of the <i>HaulRequest</i> event class is not part of the information
        design model. Rather, it is implementing an event rule specified in the
        process design model. Consequently, it will be discussed below.</p>

        </details>

        <details open="open"><summary>Implementing the Process Design Model</summary>

        <p>A DPMN process design model can be decomposed into a set of event rule design
        models, one for each type of event specified in the design model. Starting
        with the <code>HaulRequest</code> event rule design model, we show how the
        event rules specified by each of these event rule design models can be coded
        in the form of an <code>onEvent</code> method.</p>
<!--
        <figure><figcaption>A design model for the <code>HaulRequest</code> event rule.</figcaption>
         <img src="img/HaulRequest_RDM.svg" width="300" /></figure>
-->
         <p>In the following <code>HaulRequest</code> event rule method <code>onEvent</code>, all
        available trucks are allocated to the current haul request, and, after
        computing the number of loads, for each of the allocated trucks a new
        <code>GoToLoadingSite</code> activity is started:</p>

        <pre>class <b>HaulRequest</b> extends eVENT {
        ...
        <b>onEvent</b>() {
          const followupEvents=[],
                allocatedTrucks = sim.resourcePools["trucks"].<b>allocateAll</b>();
          // assign model variable
          sim.model.v.<b>nmrOfLoads</b> = Math.ceil( this.quantity / Truck.capacity);
          for (const t of allocatedTrucks) {
            const goActy = <b>new GoToLoadingSite</b>();
            // assign truck as required resource
            goActy.truck = t;
            // start GoToLoadingSite activity
            followupEvents.push( <b>new aCTIVITYsTART</b>({plannedActivity: goActy}));
          }
          return followupEvents;
        }
      }</pre>

        </details>
       </details>

         <section><h2>See also...</h2>
         <ul>
         <li><a href="https://beergame.org/">beergame.org</a></li>
         <li><a href="https://en.wikipedia.org/wiki/Beer_distribution_game">Wikipedia article</a></li>
         </ul>
         </section>

       <p><a href="index.html">Back to simulation</a></p>
      </body>
      </html>
